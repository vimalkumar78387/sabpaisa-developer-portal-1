import Link from 'next/link'

import { type IntegrationKitDoc } from '@/components/docs/integration-kit-docs'
import { IntegrationDocExplorer } from '@/components/docs/integration-doc-explorer'
import { apiReferenceKits } from '@/components/docs/api-reference-kits'
import { Button } from '@/components/ui/button'

const sandboxEndpoint = 'https://stage-securepay.sabpaisa.in/SabPaisa/sabPaisaInit?v=1'
const productionEndpoint = 'https://securepay.sabpaisa.in/SabPaisa/sabPaisaInit?v=1'
const defaultIntegrationVideoLink = 'https://www.youtube.com/watch?v=TO_BE_ADDED'
const encryptedRequest = 'U2FtcGxlRW5jcnlwdGVkUGF5bG9hZEVuY29kZWQ='
const encryptedResponse = 'QmFzZTY0RW5jcnlwdGVkUmVzcG9uc2VTYW1wbGU='

const toPrettyJson = (payload: unknown) => JSON.stringify(payload, null, 2)

const defaultEndpoints = {
  sandbox: sandboxEndpoint,
  production: productionEndpoint
} as const

const defaultRequestParameters: IntegrationKitDoc['requestParameters'] = [
  {
    name: 'merchantId',
    type: 'string',
    required: true,
    description: 'SabPaisa merchant code issued to your organisation.'
  },
  {
    name: 'orderId',
    type: 'string',
    required: true,
    description: 'Unique identifier generated by your system to track the transaction.'
  },
  {
    name: 'amount',
    type: 'number',
    required: true,
    description: 'Transaction amount expressed in paise for accuracy (â‚¹1 = 100).'
  },
  {
    name: 'currency',
    type: 'string',
    required: true,
    description: 'ISO currency code. Use INR for Indian Rupee transactions.'
  },
  {
    name: 'callbackUrl',
    type: 'string',
    required: true,
    description: 'HTTPS URL to redirect the customer after checkout completion.'
  },
  {
    name: 'customer.name',
    type: 'string',
    required: true,
    description: 'Customer full name used for receipts and risk scoring.'
  },
  {
    name: 'customer.email',
    type: 'string',
    required: true,
    description: 'Customer contact email for transactional notifications.'
  },
  {
    name: 'customer.phone',
    type: 'string',
    required: true,
    description: 'Customer mobile number in E.164 format for OTP flows.'
  },
  {
    name: 'paymentMethod',
    type: 'string',
    required: false,
    description: 'Optional preference to pre-select CARD, UPI, NETBANKING, WALLET, or EMI.'
  },
  {
    name: 'metadata',
    type: 'object',
    required: false,
    description: 'Custom JSON object (4KB limit) to persist order context for reconciliation.'
  },
  {
    name: 'webhookUrl',
    type: 'string',
    required: false,
    description: 'Optional override for the webhook endpoint if different from portal configuration.'
  }
]

const defaultResponseParameters: IntegrationKitDoc['responseParameters'] = [
  {
    name: 'paymentId',
    type: 'string',
    description: 'SabPaisa payment reference used for status checks and captures.'
  },
  {
    name: 'status',
    type: 'string',
    description: 'Payment status. Expect PENDING immediately after creation.'
  },
  {
    name: 'redirectUrl',
    type: 'string',
    description: 'Hosted checkout URL to which the customer must be redirected.'
  },
  {
    name: 'expiresAt',
    type: 'string',
    description: 'ISO8601 timestamp indicating when the payment intent expires.'
  },
  {
    name: 'referenceId',
    type: 'string',
    description: 'Echo of your orderId or an auto-generated SabPaisa reference.'
  },
  {
    name: 'metadata',
    type: 'object',
    description: 'Metadata returned exactly as sent, with SabPaisa annotations where applicable.'
  },
  {
    name: 'signature',
    type: 'string',
    description: 'Hex encoded SHA256 signature of the response body.'
  }
]

const extendRequestParameters = (
  ...additional: Array<IntegrationKitDoc['requestParameters'][number]>
): IntegrationKitDoc['requestParameters'] => [...defaultRequestParameters, ...additional]

const extendResponseParameters = (
  ...additional: Array<IntegrationKitDoc['responseParameters'][number]>
): IntegrationKitDoc['responseParameters'] => [...defaultResponseParameters, ...additional]

const defaultRequestFormat: IntegrationKitDoc['requestFormat'] = {
  transport: 'Send a POST request over HTTPS (TLS 1.2+) to /v1/payments with a JSON body signed using your SabPaisa client secret.',
  headers: [
    'Content-Type: application/json',
    'X-SP-Client-Code: <your client code>',
    'X-SP-Request-Signature: Base64(HMAC-SHA256(payload, clientSecret))'
  ],
  bodyNotes: [
    'Amounts must be integers. Avoid floating point to prevent rounding differences.',
    'Include metadata for downstream reconciliation or analytics requirements.',
    'Keep callbackUrl on HTTPS with a publicly trusted certificate.'
  ]
}

const defaultResponseFormat: IntegrationKitDoc['responseFormat'] = {
  transport: 'SabPaisa returns JSON encoded responses and includes X-SP-Response-Signature for verification.',
  notes: [
    'Always validate the response signature before persisting payment state.',
    'Use webhooks to receive SUCCESS or FAILED updates; do not rely solely on redirect responses.',
    'Retry webhook acknowledgements with exponential backoff if you receive duplicate notifications.'
  ]
}

const createFrontendRequestFormat = (framework: string): IntegrationKitDoc['requestFormat'] => ({
  transport: `Collect card or mandate details inside your ${framework} application and relay them to a secure backend which issues the SabPaisa JSON request.`,
  headers: defaultRequestFormat.headers,
  bodyNotes: [
    'Serialize frontend form data into a backend-safe DTO before signing.',
    'Attach a deviceContext.metadata field capturing user agent for additional fraud signals.',
    'Ensure CSRF protection is in place when invoking your internal proxy endpoint.'
  ]
})

const createHybridRequestFormat = (framework: string): IntegrationKitDoc['requestFormat'] => ({
  transport: `${framework} apps should capture customer intent via platform-specific plugins and forward the payload to a backend API that communicates with SabPaisa.`,
  headers: defaultRequestFormat.headers,
  bodyNotes: [
    'Use secure storage (Keychain/Keystore) for temporary tokens before calling the backend.',
    'Capture deviceId and appVersion in metadata for downstream reporting.',
    'Prefer HTTPS-only communication and enable certificate pinning where supported.'
  ]
})

const createPluginRequestFormat = (platform: string, endpoint: string): IntegrationKitDoc['requestFormat'] => ({
  transport: `${platform} plugin calls should originate from the server-side hook provided by the module and POST JSON data to ${endpoint}.`,
  headers: [
    'Content-Type: application/json',
    'X-SP-Client-Code: <plugin client code>',
    'X-SP-Plugin-Id: <module identifier>',
    'X-SP-Request-Signature: Base64(HMAC-SHA256(payload, clientSecret))'
  ],
  bodyNotes: [
    'Generate order references using platform order keys to simplify reconciliation.',
    'Map billing and shipping data to the customer node before encryption.',
    'Respect plugin configuration flags (capture later, auto-refund, etc.) when building the payload.'
  ]
})

const createFrontendResponseFormat = (framework: string): IntegrationKitDoc['responseFormat'] => ({
  transport: `Responses arrive at your backend as JSON and should be relayed to the ${framework} client via secure APIs or websockets.`,
  notes: [
    'Propagate status updates to the UI along with redirectUrl for handoff.',
    'Persist the entire response body before notifying the frontend to prevent data loss.',
    'Leverage SabPaisa webhooks to keep the client UI in sync with asynchronous updates.'
  ]
})

const javaRequestParameters: IntegrationKitDoc['requestParameters'] = [
  { name: 'payerName', type: 'Alphabet', required: true, description: 'Full name of the payer (max 100 characters).' },
  { name: 'payerEmail', type: 'Alphabet', required: true, description: 'Email address of the payer (max 100 characters).' },
  { name: 'payerMobile', type: 'Numeric', required: true, description: 'Payer mobile number in international format (max 20 digits).' },
  { name: 'clientTxnId', type: 'AlphaNumeric', required: true, description: 'Unique transaction identifier generated by the merchant.' },
  { name: 'payerAddress', type: 'AlphaNumeric', required: false, description: 'Address details of the payer (optional, max 255 characters).' },
  { name: 'amount', type: 'Numeric', required: true, description: 'Amount to be collected, expressed in major currency units (max 10 digits).' },
  { name: 'clientCode', type: 'AlphaNumeric', required: true, description: 'SabPaisa client code assigned to the merchant (5 characters).' },
  { name: 'transUserName', type: 'AlphaNumeric', required: true, description: 'SabPaisa transaction username shared with the merchant.' },
  { name: 'transUserPassword', type: 'AlphaNumeric', required: true, description: 'SabPaisa transaction password shared with the merchant.' },
  { name: 'callbackUrl', type: 'AlphaNumeric', required: true, description: 'HTTPS callback URL that receives the encResponse payload.' },
  { name: 'amountType', type: 'Alphabet', required: false, description: 'Three-letter ISO currency code (defaults to INR).' },
  ...Array.from({ length: 20 }, (_, index) => ({
    name: `udf${index + 1}`,
    type: 'AlphaNumeric',
    required: false,
    description: `User defined field ${index + 1} (optional, max 255 characters).`
  })),
  { name: 'channelId', type: 'Alphabet', required: true, description: "Channel identifier: use 'W' for web, 'M' for mobile, 'npm' for Node.js package." },
  { name: 'programId', type: 'AlphaNumeric', required: false, description: 'Master client code when transacting under a program (optional).' },
  { name: 'mcc', type: 'Numeric', required: true, description: 'Merchant category code provided by SabPaisa.' },
  { name: 'transDate', type: 'Datetime', required: true, description: 'Transaction timestamp in the format yyyy-MM-dd HH:mm:ss.' }
]

const javaResponseParameters: IntegrationKitDoc['responseParameters'] = [
  { name: 'payerName', type: 'Alphabet', description: 'Name of the payer returned for reconciliation.' },
  { name: 'payerEmail', type: 'AlphaNumeric', description: 'Email address supplied by the payer.' },
  { name: 'payerMobile', type: 'Numeric', description: 'Payer mobile number forwarded in the response.' },
  { name: 'clientTxnId', type: 'AlphaNumeric', description: 'Merchant transaction identifier used in the request.' },
  { name: 'payerAddress', type: 'AlphaNumeric', description: 'Address information returned when provided.' },
  { name: 'amount', type: 'Numeric', description: 'Transaction amount captured in major currency units.' },
  { name: 'clientCode', type: 'Alphabet', description: 'SabPaisa client code associated with the transaction.' },
  { name: 'paidAmount', type: 'Numeric', description: 'Total amount collected from the payer (can differ due to surcharges/discounts).' },
  { name: 'paymentMode', type: 'Alphabet', description: 'Payment channel used (CARD, UPI, NETBANKING, WALLET, etc.).' },
  { name: 'bankName', type: 'Alphabet', description: 'Issuing bank name as supplied by the gateway/bank.' },
  { name: 'amountType', type: 'Alphabet', description: 'Currency code for the transaction.' },
  ...Array.from({ length: 20 }, (_, index) => ({
    name: `udf${index + 1}`,
    type: 'AlphaNumeric',
    description: `Echo of user defined field ${index + 1}.`
  })),
  { name: 'status', type: 'string', description: 'High-level transaction status (SUCCESS, FAILED, ABORTED, INITIATED, etc.).' },
  { name: 'statusCode', type: 'Numeric', description: 'SabPaisa status code corresponding to the transaction state.' },
  { name: 'challanNumber', type: 'AlphaNumeric', description: 'Generated challan number for offline payments (if applicable).' },
  { name: 'sabpaisaTxnId', type: 'Alphabet', description: 'Unique SabPaisa transaction identifier.' },
  { name: 'sabpaisaMessage', type: 'AlphaNumeric', description: 'Descriptive message returned by SabPaisa for the transaction.' },
  { name: 'bankMessage', type: 'AlphaNumeric', description: 'Message returned by the issuing bank or payment partner.' },
  { name: 'bankErrorCode', type: 'AlphaNumeric', description: 'Error code supplied by the bank when a transaction fails.' },
  { name: 'sabpaisaErrorCode', type: 'AlphaNumeric', description: 'Error code supplied by SabPaisa when available.' },
  { name: 'bankTxnId', type: 'AlphaNumeric', description: 'Transaction identifier returned by the bank/payment channel.' },
  { name: 'programId', type: 'AlphaNumeric', description: 'Program or master client code returned when applicable.' },
  { name: 'mcc', type: 'Numeric', description: 'Merchant category code returned in the response.' },
  { name: 'transDate', type: 'Datetime', description: 'Processing timestamp returned by SabPaisa.' },
  { name: 'rrn', type: 'string', description: 'Reference retrieval number when provided by the bank/issuer.' }
]

const javaRequestFormat: IntegrationKitDoc['requestFormat'] = {
  transport: 'Submit an HTTPS POST form to the SabPaisa init endpoint with two form fields: encData and clientCode.',
  headers: ['Content-Type: application/x-www-form-urlencoded'],
  bodyNotes: [
    'Concatenate all request parameters as key=value pairs separated by & before encryption.',
    'Encrypt the concatenated payload with AES256 + HMAC-SHA384 using the provided authKey/authIV to produce encData.',
    'Post encData and clientCode to the environment-specific URL once the mandatory parameters are populated.',
    'Ensure the clientTxnId is unique per transaction; duplicate values are rejected.'
  ]
}

const javaResponseFormat: IntegrationKitDoc['responseFormat'] = {
  transport: 'SabPaisa posts an encResponse payload to the callback URL. Decrypt using AES256 + HMAC-SHA384 to retrieve the key=value pairs.',
  notes: [
    'Always validate the decrypted payload before marking the transaction complete.',
    'Map statusCode values as follows: 0000=Success, 0300=Failed, 0100=Initiated, 0200=Aborted, 0400=Challan generated, 0999=Unknown, 404=Transaction not found.',
    'Persist sabpaisaTxnId, bankTxnId, and rrn for settlement and dispute workflows.'
  ]
}

const javaSampleEncryptedRequest = 'encData: A8ECE8F6AF57BD264B4F51369DE2A95F37B81B4A3AF41B1C8825ACB3B4B04FA7A4194A933365875ADB6FA68529A5A58F742E502C13BB8022C8711048A0DE8D52B62EB27AA437CD273CF9747BBE5F3E5B6E2DB6C96301D2DCDA39769758772BB0027FAA3CB89E67074C1193EFEC1E1E155D603CCDDD6BB2BC4C2CDB78212D745AD583CC7F7694149C00BF8AC3D3EFAE8D55788B30F6C1964211C97304309FAF65B9F53839AE7D95EAA4D6CB25696129AF8673232599FA1B3758E4C88EF08007EFB8BC0EF610A122F1794B637E2BCBB9E2EA31102C85427EA113E91104084503FA420886006778E2694350F023F33ED15ADE036442706F8416579E12E92F8DCD7790C18914A3089B7CDD1F549D2215EE9056FFDDB5D246A856D2325380AAEEED0ACBB2BD8AF32997921E19D9C23FBB3C9BC3FA84F785304900'
const javaSampleDecryptedRequest = 'payerName=vimalkumar&payerEmail=xyz@gmail.com&payerMobile=987456321&clientTxnId=SD2MHLRTP2UKZ2B7AYGY&amount=5&clientCode=DJ020&transUserName=DJL754@sp&transUserPassword=4q3qhgmJNM4m&callbackUrl=http://localhost:8080/response&channelId=W'

const javaSampleEncryptedResponse = 'encResponse: 6675E6836AC42838C9531381EEC1846A5DA18A77C57FC1E623AB7F7AA8A7CDA45DF696B15B11D259C5A4A40C6022F4CF8A5EB2FCB2ECDB1946A696470E01B305B83554CE6B34597B501712877C35E1B9FE75AD29DE7BF674AED29132655E4432199DEC8D02652D48EF32C81321F049E791E8C28076EB399185BE7BD2CE2E413B410495D53E3C8BF9B506D0D6CA9EE867DF8F1B6CBD5FBB76315CDE59CFBA5C7AE6EDC08A280AFB0FE663D37628B9BD1A5B2D9D2C8F34CEF6739E7C4A1A477046C5B1EFE1DE797C599A9F378C41D32B735F73CC1CE928EAB21E22915B477B8BF1F962866CBEA8819223BEE7F96AF3162AD33301D5FF0697C49112E09DA70CDE489CC3CBA8D8E745DE76E85E512ECE7CF199FE88D8DE5494E42A450E3A5D8B390BEEED35A82722491BAF441E5BF992A736A083ADA5478D7714F7E16FC858033194F22DCD99CC085062C754176022BE7953C452BF6B1E0065919B65AC388BD4ED2500A5CB7DEC828300827FE66F6EAA9C811D472E0EB09BED9D376A67C30E75AAFF7FBCBC36605490C5179DC315C80B8018F5624C504DBB3CDEA03785E72934642EE05549A5F392C8064BF8C38393472F45B3B24C9F2941DCA8BFA3D19AB9107C7054943EA6EF5AF9C6E6C1F0DB9920AE7367E2376B750BC47B6A3BB110DC0CA720063E3BD4CD55B13C63070253B518D65F18848EAE15ED70ABC64A23C140E50E6C6237A3059B2FAD0F0AC9E11F048BB3DACB44F3BA238B71300C835D1EAD7DCC4A02E9EE3FF4E651082CF6CF9C76CED6C90895C05C650D0F01C240B1959D49F305AB706C4F1FC9AE97F611C050FBCF465870C44755FF03D33DFEA84EE1AFE31DB14D8F680598EBBC2C9E742F0CEABDD008254FF9941FB0A32D9B4A6BD6B88254B91F876B260710A08B1EDF81B4B478000A6C9AF9887A224E5388B55BF46AAB844D224A4777377F36C8982DCB1E1014A3E07EBADEB8F70ED9B45A3515F759075B19102D3CF59D88D7844CB8B520DD60AD7CA5C633918FC5'
const javaSampleDecryptedResponse = 'payerName=vimalkumar&payerEmail=xyz@gmail.com&payerMobile=987456321&clientTxnId=SD2MHLRTP2UKZ2B7AYGY&payerAddress=NA&amount=5.0&clientCode=DJ020&paidAmount=null&paymentMode=&bankName=&amountType=INR&status=ABORTED&statusCode=0200&challanNumber=null&sabpaisaTxnId=&sabpaisaMessage=Payer cancelled the transaction before completion&bankMessage=&bankErrorCode=&sabpaisaErrorCode=CH0005&bankTxnId=&transDate=Mon Jun 30 13:09:00 IST 2025&udf1=NA&udf2=NA&udf3=NA&udf4=NA&udf5=NA&udf6=NA&udf7=NA&udf8=NA&udf9=null&udf10=null&udf11=null&udf12=null&udf13=null&udf14=null&udf15=null&udf16=null&udf17=null&udf18=null&udf19=null&udf20=null&rrn='

const phpRequestParameters: IntegrationKitDoc['requestParameters'] = [
  { name: 'payerName', type: 'Alphabet', required: true, description: 'Name of the payer (mandatory, max 100 characters).' },
  { name: 'payerEmail', type: 'Alphabet', required: true, description: 'Email address of the payer (mandatory, max 100 characters).' },
  { name: 'payerMobile', type: 'Numeric', required: true, description: 'Mobile number of the payer (mandatory, max 20 digits).' },
  { name: 'clientTxnId', type: 'AlphaNumeric', required: true, description: 'Transaction ID generated by the client (mandatory, max 100 characters).' },
  { name: 'payerAddress', type: 'AlphaNumeric', required: false, description: 'Address of the payer (optional, max 255 characters).' },
  { name: 'amount', type: 'Numeric', required: true, description: 'Amount entered by the payer (mandatory, max 10 digits).' },
  { name: 'clientCode', type: 'AlphaNumeric', required: true, description: 'SabPaisa client code (mandatory, 5 characters).' },
  { name: 'transUserName', type: 'AlphaNumeric', required: true, description: 'Username shared by SabPaisa (mandatory, max 50 characters).' },
  { name: 'transUserPassword', type: 'AlphaNumeric', required: true, description: 'Password shared by SabPaisa (mandatory, max 50 characters).' },
  { name: 'callbackUrl', type: 'AlphaNumeric', required: true, description: 'URL that receives the SabPaisa response (mandatory, max 255 characters).' },
  { name: 'amountType', type: 'Alphabet', required: false, description: 'Currency type of the amount (optional, e.g., INR, USD).' },
  ...Array.from({ length: 20 }, (_, index) => ({
    name: `udf${index + 1}`,
    type: 'AlphaNumeric',
    required: false,
    description: `User defined field ${index + 1} (optional, max 255 characters).`
  })),
  { name: 'channelId', type: 'Alphabet', required: true, description: "Channel identifier: use 'W' for web, 'M' for mobile, 'npm' for npm." },
  { name: 'programId', type: 'AlphaNumeric', required: false, description: 'Master client code (optional, max 255 characters).' },
  { name: 'mcc', type: 'Numeric', required: true, description: 'Merchant category code (mandatory, max 20 digits).' },
  { name: 'transDate', type: 'Datetime', required: true, description: 'Transaction date in the format yyyy-MM-dd HH:mm:ss (mandatory).' }
]

const phpResponseParameters: IntegrationKitDoc['responseParameters'] = [
  { name: 'payerName', type: 'Alphabet', description: 'Name of the payer returned in the response.' },
  { name: 'payerEmail', type: 'AlphaNumeric', description: 'Email address of the payer.' },
  { name: 'payerMobile', type: 'Numeric', description: 'Mobile number of the payer.' },
  { name: 'clientTxnId', type: 'AlphaNumeric', description: 'Transaction ID generated by the client.' },
  { name: 'payerAddress', type: 'AlphaNumeric', description: 'Address of the payer when shared.' },
  { name: 'amount', type: 'Numeric', description: 'Amount of the transaction.' },
  { name: 'clientCode', type: 'Alphabet', description: 'Client code echoed back from SabPaisa.' },
  { name: 'paidAmount', type: 'Numeric', description: 'Total amount paid.' },
  { name: 'paymentMode', type: 'Alphabet', description: 'Mode of payment used.' },
  { name: 'bankName', type: 'Alphabet', description: 'Name of the bank involved in the transaction.' },
  { name: 'amountType', type: 'Alphabet', description: 'Currency type of the transaction amount.' },
  ...Array.from({ length: 20 }, (_, index) => ({
    name: `udf${index + 1}`,
    type: 'AlphaNumeric',
    description: `User defined field ${index + 1} echoed from the response.`
  })),
  { name: 'status', type: 'Alphabet', description: 'Status of the transaction (SUCCESS/FAILED/ABORTED/etc.).' },
  { name: 'statusCode', type: 'Numeric', description: 'SabPaisa status code for the transaction.' },
  { name: 'challanNumber', type: 'AlphaNumeric', description: 'Challan number for offline flows when applicable.' },
  { name: 'sabpaisaTxnId', type: 'Alphabet', description: 'SabPaisa generated transaction ID.' },
  { name: 'sabpaisaMessage', type: 'AlphaNumeric', description: 'Response message from SabPaisa.' },
  { name: 'bankMessage', type: 'AlphaNumeric', description: 'Response message from the bank.' },
  { name: 'bankErrorCode', type: 'AlphaNumeric', description: 'Error code provided by the bank.' },
  { name: 'sabpaisaErrorCode', type: 'AlphaNumeric', description: 'Error code provided by SabPaisa.' },
  { name: 'bankTxnId', type: 'AlphaNumeric', description: 'Bank transaction identifier.' },
  { name: 'programId', type: 'AlphaNumeric', description: 'Master client code returned when available.' },
  { name: 'mcc', type: 'Numeric', description: 'Merchant category code echoed in the response.' },
  { name: 'transDate', type: 'Datetime', description: 'Transaction date/time returned by SabPaisa.' }
]

const phpRequestFormat: IntegrationKitDoc['requestFormat'] = {
  transport: 'Use a server-side HTTP POST (method="post") to submit x-www-form-urlencoded form data to the SabPaisa init URL with encData and clientCode fields.',
  headers: [
    'Content-Type: application/x-www-form-urlencoded',
    'Accept: text/html'
  ],
  bodyNotes: [
    'Build the plain request string by concatenating key=value pairs with & before encryption.',
    'Encrypt the concatenated string with AES256 HMAC-SHA384 to produce encData and include only encData and clientCode in the outbound POST.',
    'Ensure the POST targets the environment-specific URL (staging or production) over HTTPS.'
  ]
}

const phpResponseFormat: IntegrationKitDoc['responseFormat'] = {
  transport: 'SabPaisa returns hosted checkout HTML to the payer and sends an encrypted encResponse via HTTP POST to the merchant callback URL.',
  notes: [
    'Callback responses arrive as POST body parameter encResponse.',
    'Decrypt encResponse with the same authKey/authIV to retrieve all fields.',
    'Always reconcile status/statusCode and log sabpaisaTxnId plus bank references.'
  ]
}

const phpSampleEncryptedRequest = 'encData: B02DAE5DDE064E91BD5686DBA74AB9F7C647ED5DA35550F297756E1D98B059898DFEBFE3FCE20E0F60BC9D62A32ABED81D6D66C2B614C82CD04C7E0E0AF3C36C4F44CF640FE4010ADD4F79C207681FAEF7CB5FDE269404641E334ED91EA9CF797DB6CB8981767A46FED545D607FDB0B31B21060CA2F35C6564598A6DE64D1FE51BE4520A6C6B507B4E1DAB3A7F76C0E2CDEBADB976D2BBF52179D104D5E65BD8B6A8B2C637909869EF3E49BB0CED0DCD3A7B575C67597930EBFE788B7827E1DB347E56EA85CB66E0D12B8EAA0F8DD0DA4B98DEF8FF0C040201E960A7B2F5A6A289F92844F29863FC56764EEEB033CCE9584DF15BF47B63936F03E485423F645835D8CF38AF33C6FD3F2C7571B8CB116A87BCA86465A6455A7ECBD009B33C169CE6E0DF9D8C8D3240DC55EFD1377B3E37085C97C8DB8EBACA1A5E5327DA24BFA9A8D20E89638FF1F0DBE1359E35E02BD6917CAB82FC1FF09902E102354058843971BD3BAFC3E24AC3EED3C0'
const phpSampleDecryptedRequest = 'clientCode=DJ020&transUserName=DJL754@sp&transUserPassword=4q3qhgmJNM4m&payerName=name&payerMobile=1234567890&payerEmail=Test@email.in&payerAddress=Patna, Bihar&clientTxnId=4662&amount=10&amountType=INR&mcc=5137&channelId=W&callbackUrl=http://127.0.0.1/php2.0/SabPaisaPostPgResponse.php'
const phpSampleEncryptedResponse = 'encResponse: 429E84C74AB283D96A19A3F4DC11CB79DB6ACCECCBAFD9588EFF16291EA4C82A1A15B5F3954FBF948B71F0B27C663ABCD29AF04C448CA84C231DB03EE92A9BA93FFF7B0F016A40F9577CB8EA5D97C290A0681B1C6C0B8C85ED25165BCE1E2FFE1AAACDAA02A4A6C63AFF37D7F58B47BB3CAB08AFEAA955142536A58DA195E28A33C1030B737017D68CF2597D8A8379B4694EE7A46F4AB466DB88E2695EC0D941B0DD8258B152A6C8EC09E4D382983419023184F0229959547F79057EA050578EE7DD88E2E4E8F9B95F069F97576029AB1E64DBE38ADBB779CB4EADEE37D599335A96520DE7715F47B0E10F8BA1D45DA9737F07BD974EE5955405C782DBF07B21923386F0B8671DDEEA729CF96456A8703921FA1FF8E80EA965530C4333C52B811A27BED28D2CB48A73A60ABC38CEE3C370F05680E2E2FD2D346A9C7084DD2E02727E0C8CC6CB42437FCBC77327687F31F2728F49C8EBBE5EB8C361551A8B9A5D30D864960CEB6A4DCBC80610D0A8A5452ED062D83660ACE6368A370BF08A7C1B0D0479AD1321685A54DE786CE2B9E968B15FEBE3D9F294C7B212A8F1BEE67EFEBEF9BAA7A1029B72201677FC3A7DDCADB4068605AC01B85E3B03656352DF66FED35F973117CB722990D02AEB13FE26625CA762E6C96B25D0C262A62CA4F3DE50878DEB4FF055A52735A3B79BC68384FD42FBFAAD037D7183EAAB6DEFE9D3511FE84858F659EF3C508171C3D21F846506EFBB43D794C96112AA679DBB82A414D3A93E48F1BFEC1C2A39395529DAD4CC9EAD324412380D4986D89EBB5D40CF42469DFEB1CEA3043D651E4C988530A5958DFCC553B0CB44E49F6DEB60C871B531525C9D1CFD71D30ADBE4373B58B5B6AB8A8C922F9A465BD18E835D3E78A92381459ED0339AA1DBEA62A34D15279E2DEC168145B5FCA3322C3B8C161276B4BBBB08C2D99B1F259AFFA9D05C399308D192AC456F8909CF16FB77141479C084467DC4A8134ED2F8A78FF5170D71D9'
const phpSampleDecryptedResponse = 'payerName=name&payerEmail=Test@email.in&payerMobile=1234567890&clientTxnId=4662&payerAddress=Patna, Bihar&amount=10.0&clientCode=DJ020&paidAmount=10.0&paymentMode=NetBanking&bankName=SabPaisaBank&amountType=INR&status=SUCCESS&statusCode=0000&challanNumber=null&sabpaisaTxnId=SP1234567890123456&sabpaisaMessage=Transaction is successfully done&bankMessage=Approved&bankErrorCode=null&sabpaisaErrorCode=null&bankTxnId=NB123456789&transDate=Mon Jun 30 13:09:00 IST 2025&udf1=NA&udf2=NA&udf3=NA&udf4=NA&udf5=NA&udf6=NA&udf7=NA&udf8=NA&udf9=null&udf10=null&udf11=null&udf12=null&udf13=null&udf14=null&udf15=null&udf16=null&udf17=null&udf18=null&udf19=null&udf20=null&rrn=SP6042619113689'

const nodeRequestParameters: IntegrationKitDoc['requestParameters'] = [
  { name: 'payerName', type: 'Alphabet', required: true, description: 'Name of the payer (max 100 characters).' },
  { name: 'payerEmail', type: 'Alphabet', required: true, description: 'Payer email address (max 100 characters).' },
  { name: 'payerMobile', type: 'Numeric', required: true, description: 'Mobile number of the payer (max 20 digits).' },
  { name: 'clientTxnId', type: 'AlphaNumeric', required: true, description: 'Unique transaction ID generated by the merchant (max 100 characters).' },
  { name: 'payerAddress', type: 'AlphaNumeric', required: false, description: 'Optional payer address (max 255 characters).' },
  { name: 'amount', type: 'Numeric', required: true, description: 'Amount entered by the payer (max 10 digits).' },
  { name: 'clientCode', type: 'AlphaNumeric', required: true, description: 'SabPaisa client code (5 characters).' },
  { name: 'transUserName', type: 'AlphaNumeric', required: true, description: 'SabPaisa transaction username (max 50 characters).' },
  { name: 'transUserPassword', type: 'AlphaNumeric', required: true, description: 'SabPaisa transaction password (max 50 characters).' },
  { name: 'callbackUrl', type: 'AlphaNumeric', required: true, description: 'URL to receive the SabPaisa response (max 255 characters).' },
  { name: 'amountType', type: 'Alphabet', required: false, description: 'Currency type such as INR or USD (3 characters).' },
  ...Array.from({ length: 20 }, (_, index) => ({
    name: `udf${index + 1}`,
    type: 'AlphaNumeric',
    required: false,
    description: `Optional user-defined field ${index + 1} (max 255 characters).`
  })),
  { name: 'channelId', type: 'Alphabet', required: true, description: "Channel indicator: use 'W' for web, 'M' for mobile, 'npm' for Node.js runtime." },
  { name: 'programId', type: 'AlphaNumeric', required: false, description: 'Optional master client code (max 255 characters).' },
  { name: 'mcc', type: 'Numeric', required: true, description: 'Merchant Category Code (max 20 digits).' },
  { name: 'transDate', type: 'Datetime', required: true, description: 'Transaction datetime in yyyy-MM-dd HH:mm:ss format.' }
]

const nodeResponseParameters: IntegrationKitDoc['responseParameters'] = [
  { name: 'payerName', type: 'Alphabet', description: 'Name of the payer returned for reconciliation.' },
  { name: 'payerEmail', type: 'AlphaNumeric', description: 'Email of the payer as echoed by SabPaisa.' },
  { name: 'payerMobile', type: 'Numeric', description: 'Payer mobile number.' },
  { name: 'clientTxnId', type: 'AlphaNumeric', description: 'Merchant transaction ID supplied in the request.' },
  { name: 'payerAddress', type: 'AlphaNumeric', description: 'Address of the payer when provided.' },
  { name: 'amount', type: 'Numeric', description: 'Transaction amount.' },
  { name: 'clientCode', type: 'Alphabet', description: 'Client code associated with the transaction.' },
  { name: 'paidAmount', type: 'Numeric', description: 'Total amount collected.' },
  { name: 'paymentMode', type: 'Alphabet', description: 'Payment mode used for the transaction.' },
  { name: 'bankName', type: 'Alphabet', description: 'Bank name returned from the gateway.' },
  { name: 'amountType', type: 'Alphabet', description: 'Currency code (INR/USD).' },
  ...Array.from({ length: 20 }, (_, index) => ({
    name: `udf${index + 1}`,
    type: 'AlphaNumeric',
    description: `Echoed value for user-defined field ${index + 1}.`
  })),
  { name: 'status', type: 'Alphabet', description: 'High-level transaction status (SUCCESS/FAILED/ABORTED/etc.).' },
  { name: 'statusCode', type: 'Numeric', description: 'SabPaisa status code indicating the transaction outcome.' },
  { name: 'challanNumber', type: 'AlphaNumeric', description: 'Challan number for offline collections when applicable.' },
  { name: 'sabpaisaTxnId', type: 'Alphabet', description: 'SabPaisa-generated transaction ID.' },
  { name: 'sabpaisaMessage', type: 'AlphaNumeric', description: 'Narrative message returned by SabPaisa.' },
  { name: 'bankMessage', type: 'AlphaNumeric', description: 'Message returned by the issuing bank.' },
  { name: 'bankErrorCode', type: 'AlphaNumeric', description: 'Error code provided by the bank when applicable.' },
  { name: 'sabpaisaErrorCode', type: 'AlphaNumeric', description: 'SabPaisa-specific error code.' },
  { name: 'bankTxnId', type: 'AlphaNumeric', description: 'Transaction identifier generated by the bank.' },
  { name: 'programId', type: 'AlphaNumeric', description: 'Program/master client code echoed in the response.' },
  { name: 'mcc', type: 'Numeric', description: 'Merchant category code in the response payload.' },
  { name: 'transDate', type: 'Datetime', description: 'Timestamp returned by SabPaisa (yyyy-MM-dd HH:mm:ss).' }
]

const nodeRequestFormat: IntegrationKitDoc['requestFormat'] = {
  transport: 'Issue an HTTPS POST from your Node.js server (fetch, axios, or native https) to the sabPaisaInit URL with application/x-www-form-urlencoded form data containing encData and clientCode.',
  headers: [
    'Content-Type: application/x-www-form-urlencoded',
    'Accept: text/html'
  ],
  bodyNotes: [
    'Concatenate all mandatory parameters as key=value pairs joined by & before encryption.',
    'Use server-side AES256 + HMAC-SHA384 helpers to encrypt the plain string and produce encData.',
    'POST only encData and clientCode, then redirect the payer to the HTML response SabPaisa returns.'
  ]
}

const nodeResponseFormat: IntegrationKitDoc['responseFormat'] = {
  transport: 'SabPaisa redirects the payer back to the merchant site while sending an encResponse payload to the configured callbackUrl via HTTP POST.',
  notes: [
    'Handle callback POSTs on a public HTTPS endpoint and read the encResponse parameter.',
    'Decrypt encResponse with the same authKey/authIV used for requests to access transaction fields.',
    'Track status/statusCode combinations (0000 success, 0300 failed, 0200 aborted, 0100 initiated, 0999 unknown, 0400 challan, 404 not found).'
  ]
}

const nodeSampleEncryptedRequest = 'encData: 1067233A8C2D35C79717DFA06401ED2818133953790AE99462409EDFBFDB280B89983F000D6CAE36A22BC368DA4828BEF88C82CBFF89B096254FC4FF0275D6C44D2DF8C3D70A64BD9F2DE59D6598D0C1553A3B91342FC6928628A98492F334996E2B9E7301A90F809A65ABC03034337EABE5C0C952238A45C893C549C3C95D87DD71BC7E430BC64B5609F4EFB989EAE7AC01E4E0E78A10CA2D74391C75B0E32C9A8A317B9DD527E7740F28117C9C985281420C9BDDE072DABADA324BCBA5065F5CE5A1DD9B63F8BCDC6E98FE96E43F6B9C76315A47A9D1F6FFCC533A9E3019C97746E63D98280A2D5934261FDD6B7573AA8B1BF7C1FF52CAC250E14D842561B533B764EB56479A4347D5C50874FBA46D8C6A0B2BB45D728D0860DED0509A6DC0F5A39E9ACBEC6F7D9216463993E18291F6B135AC08AC4A281F8FA9D2DEDC7F9562BA42AC544E3BF0DE405CDFD82585A03F224EC75718145F49F7B5'
const nodeSampleDecryptedRequest = 'payerName=Name&payerEmail=test@email.in&payerMobile=1234567890&clientTxnId=bd3bcd3e45edbcdddbb1&amount=20&clientCode=DJ020&transUserName=DJL754@sp&transUserPassword=4q3qhgmJNM4m&callbackUrl=http://localhost:3000/getPgRes&channelId=W&mcc=5666&transDate=2025-07-03 14:33:57'
const nodeSampleEncryptedResponse = 'encResponse: 1E978D999DAD739F214EF68D85CE975CC808B11555D6A84E595DFE156659E38F1AFA38CA52104FFAF992793A54831ECDE3EE6BE419025385C0777D3FA05BD5C20576D543D1BB13C6A171BE483D475D3BC4205055501A7E8DD38D04FBEB3CB8C1889A0C57F5BF08BEBFE5CEA460B124E85B5A1AC5BCBB983785B37B63FCCA706E516C107136B3BBE7F7A0279E7F98F263DA51A81DEAC1D81563E0684FA1647801F8D6957ADFD64360934205C7CF03BE0ED3F763FB172EBB593071E0C219D38455E6FF60255233D55792081F019E91B58653DC87EBA0C57AEBDDE6E611306E85729D6A37DD39E4C0F9F266CD4C52A03D1AD851954359C906C3D485F4BC9DB108C04B835D30E5E2483110CA557A502F4D04F987DF4CEB3BCD4404383B215DD579C7CF6EAE042C879BFA51EB88C98668863903BE92BA398672AC92AE295DC9B13E73B474D9F5C72A96E6409A11B1C52551C3A91E050B7028ABB419DC212F3E2C7A4EF885826B41CD18DE83DC141D11978D019F9E49D482A330F7275E7AB49FB1D48EEC6B720187F9891A6E1B66943BDFAF0C62E6262523E9F83F6C3FA5E95A981E1D1E31177ABA5735538CD64F91024C33F7FF6C04AD00946184DF318F6D3D4086F61B49A659322844E40C1D0EE32D2359748CA41E450B9F24031F3B633435019EDDD412558F7DDBB0E18A58BE273A6273A40A5313BA47B43F64F8B540CA6266EB45987F1CCE384B1568F471A4FADB5355B0294B60C3D0B216D32E01B0D26AA74EF01FDF9820852EDE88CADD9EEBA9EB7EA4CBF54A593128BB96595B534512BC7BE9011FBD956FC7EC9EB6AEAAAA5371C5D5859C2CADA63D380C848387C2305B207FE50821469418746BD414A4C78D534334BC1FD5A4C1AF0A77B65B18BCA5DD18D1E7F01D39FE9FBC206C1C9F94CB75E0400D47EC7ED30990AD66D4C1E434830D3548214376A8A03849ECED2B96C8968C3F73AB04BE03AC34C96F1759EDB5D0C7DB1991D9897EE7477D23A943336FFE4FD07EB5'
const nodeSampleDecryptedResponse = 'payerName=Name&payerEmail=test@email.in&payerMobile=1234567890&clientTxnId=bd3bcd3e45edbcdddbb1&payerAddress=NA&amount=20.0&clientCode=DJ020&paidAmount=20.0&paymentMode=NetBanking&bankName=SabPaisaBank&amountType=INR&status=SUCCESS&statusCode=0000&challanNumber=null&sabpaisaTxnId=SP347730705250114130&sabpaisaMessage=Transaction is complete&bankMessage=Approved&bankErrorCode=null&sabpaisaErrorCode=null&bankTxnId=NB987654321&transDate=Thu Jul 03 14:34:15 IST 2025&udf1=NA&udf2=NA&udf3=NA&udf4=NA&udf5=NA&udf6=NA&udf7=NA&udf8=NA&udf9=null&udf10=null&udf11=null&udf12=null&udf13=null&udf14=null&udf15=null&udf16=null&udf17=null&udf18=null&udf19=null&udf20=null&rrn=SP6042619113690'

const laravelRequestParameters: IntegrationKitDoc['requestParameters'] = [
  { name: 'payerName', type: 'Alphabet', required: true, description: 'Name of the payer (max 100 characters).' },
  { name: 'payerEmail', type: 'Alphabet', required: true, description: 'Email address of the payer (max 100 characters).' },
  { name: 'payerMobile', type: 'Numeric', required: true, description: 'Mobile number of the payer (max 20 digits).' },
  { name: 'clientTxnId', type: 'AlphaNumeric', required: true, description: 'Unique transaction ID generated by the client (max 100 characters).' },
  { name: 'payerAddress', type: 'AlphaNumeric', required: false, description: 'Optional payer address (max 255 characters).' },
  { name: 'amount', type: 'Numeric', required: true, description: 'Amount entered by the payer (max 10 digits).' },
  { name: 'clientCode', type: 'AlphaNumeric', required: true, description: 'SabPaisa client code (5 characters).' },
  { name: 'transUserName', type: 'AlphaNumeric', required: true, description: 'SabPaisa username shared with the merchant (max 50 characters).' },
  { name: 'transUserPassword', type: 'AlphaNumeric', required: true, description: 'SabPaisa password shared with the merchant (max 50 characters).' },
  { name: 'callbackUrl', type: 'AlphaNumeric', required: true, description: 'Public HTTPS URL for receiving encResponse (max 255 characters).' },
  { name: 'amountType', type: 'Alphabet', required: false, description: 'Currency code such as INR or USD (3 characters).' },
  ...Array.from({ length: 20 }, (_, index) => ({
    name: `udf${index + 1}`,
    type: 'AlphaNumeric',
    required: false,
    description: `User defined field ${index + 1} (optional, max 255 characters).`
  })),
  { name: 'channelId', type: 'Alphabet', required: true, description: "Channel identifier: use 'W' for web, 'M' for mobile, 'npm' for npm integrations." },
  { name: 'programId', type: 'AlphaNumeric', required: false, description: 'Optional master client code (max 255 characters).' },
  { name: 'mcc', type: 'Numeric', required: true, description: 'Merchant Category Code (max 20 digits).' },
  { name: 'transDate', type: 'Datetime', required: true, description: 'Timestamp in yyyy-MM-dd HH:mm:ss format.' }
]

const laravelResponseParameters: IntegrationKitDoc['responseParameters'] = [
  { name: 'payerName', type: 'Alphabet', description: 'Name of the payer returned by SabPaisa.' },
  { name: 'payerEmail', type: 'AlphaNumeric', description: 'Email address captured for the payer.' },
  { name: 'payerMobile', type: 'Numeric', description: 'Payer mobile number echoed back.' },
  { name: 'clientTxnId', type: 'AlphaNumeric', description: 'Merchant transaction identifier sent in the request.' },
  { name: 'payerAddress', type: 'AlphaNumeric', description: 'Optional payer address when provided.' },
  { name: 'amount', type: 'Numeric', description: 'Transaction amount requested.' },
  { name: 'clientCode', type: 'Alphabet', description: 'Client code associated with the transaction.' },
  { name: 'paidAmount', type: 'Numeric', description: 'Total amount paid by the customer.' },
  { name: 'paymentMode', type: 'Alphabet', description: 'Payment mode used (card, UPI, net banking, etc.).' },
  { name: 'bankName', type: 'Alphabet', description: 'Bank name returned by SabPaisa.' },
  { name: 'amountType', type: 'Alphabet', description: 'Currency type of the amount.' },
  ...Array.from({ length: 20 }, (_, index) => ({
    name: `udf${index + 1}`,
    type: 'AlphaNumeric',
    description: `Echoed value for user defined field ${index + 1}.`
  })),
  { name: 'status', type: 'Alphabet', description: 'Transaction status (SUCCESS/FAILED/ABORTED/etc.).' },
  { name: 'statusCode', type: 'Numeric', description: 'SabPaisa status code for the transaction.' },
  { name: 'challanNumber', type: 'AlphaNumeric', description: 'Challan number for offline payments.' },
  { name: 'sabpaisaTxnId', type: 'Alphabet', description: 'SabPaisa-generated transaction ID.' },
  { name: 'sabpaisaMessage', type: 'AlphaNumeric', description: 'Response message from SabPaisa.' },
  { name: 'bankMessage', type: 'AlphaNumeric', description: 'Message returned by the issuing bank.' },
  { name: 'bankErrorCode', type: 'AlphaNumeric', description: 'Error code supplied by the bank when relevant.' },
  { name: 'sabpaisaErrorCode', type: 'AlphaNumeric', description: 'SabPaisa-specific error code.' },
  { name: 'bankTxnId', type: 'AlphaNumeric', description: 'Transaction identifier returned by the bank.' },
  { name: 'programId', type: 'AlphaNumeric', description: 'Program/master client code when applicable.' },
  { name: 'mcc', type: 'Numeric', description: 'Merchant Category Code returned in the response.' },
  { name: 'transDate', type: 'Datetime', description: 'Timestamp recorded by SabPaisa.' }
]

const laravelRequestFormat: IntegrationKitDoc['requestFormat'] = {
  transport: 'Use a Laravel controller or Blade form to POST encData and clientCode to the sabPaisaInit endpoint over HTTPS (TLS 1.2+).',
  headers: [
    'Content-Type: application/x-www-form-urlencoded',
    'Accept: text/html'
  ],
  bodyNotes: [
    'Concatenate key=value pairs in the documented order to form the plain request string (encData content).',
    'Encrypt the string with SabPaisa AES-256-GCM + HMAC-SHA384 helpers and convert to HEX.',
    'Send only encData and clientCode in the POST body; Laravel Blade forms typically include @csrf for local protection.'
  ]
}

const laravelResponseFormat: IntegrationKitDoc['responseFormat'] = {
  transport: 'SabPaisa posts encResponse to the merchant callback URL after the hosted checkout completes; decrypt server-side to reconcile orders.',
  notes: [
    'Expose a public HTTPS callback route (e.g., /sabpaisa/callback) that reads the encResponse form field.',
    'Decrypt the payload using the same authKey/authIV to recover key=value pairs.',
    'Map status/statusCode combinations (0000 success, 0300 failed, 0100 initiated, 0200 aborted, 0999 unknown, 0400 challan, 404 not found) and update orders accordingly.'
  ]
}

const laravelSampleEncryptedRequest = 'encData: B02DAE5DDE064E91BD5686DBA74AB9F7C647ED5DA35550F297756E1D98B059898DFEBFE3FCE20E0F60BC9D62A32ABED81D6D66C2B614C82CD04C7E0E0AF3C36C4F44CF640FE4010ADD4F79C207681FAEF7CB5FDE269404641E334ED91EA9CF797DB6CB8981767A46FED545D607FDB0B31B21060CA2F35C6564598A6DE64D1FE51BE4520A6C6B507B4E1DAB3A7F76C0E2CDEBADB976D2BBF52179D104D5E65BD8B6A8B2C637909869EF3E49BB0CED0DCD3A7B575C67597930EBFE788B7827E1DB347E56EA85CB66E0D12B8EAA0F8DD0DA4B98DEF8FF0C040201E960A7B2F5A6A289F92844F29863FC56764EEEB033CCE9584DF15BF47B63936F03E485423F645835D8CF38AF33C6FD3F2C7571B8CB116A87BCA86465A6455A7ECBD009B33C169CE6E0DF9D8C8D3240DC55EFD1377B3E37085C97C8DB8EBACA1A5E5327DA24BFA9A8D20E89638FF1F0DBE1359E35E02BD6917CAB82FC1FF09902E102354058843971BD3BAFC3E24AC3EED3C0'
const laravelSampleDecryptedRequest = 'clientCode=DJ020&transUserName=DJL754@sp&transUserPassword=4q3qhgmJNM4m&payerName=name&payerMobile=1234567890&payerEmail=Test@email.in&payerAddress=Patna, Bihar&clientTxnId=4662&amount=10&amountType=INR&mcc=5137&channelId=W&callbackUrl=http://127.0.0.1/php2.0/SabPaisaPostPgResponse.php'
const laravelSampleEncryptedResponse = 'encResponse: 429E84C74AB283D96A19A3F4DC11CB79DB6ACCECCBAFD9588EFF16291EA4C82A1A15B5F3954FBF948B71F0B27C663ABCD29AF04C448CA84C231DB03EE92A9BA93FFF7B0F016A40F9577CB8EA5D97C290A0681B1C6C0B8C85ED25165BCE1E2FFE1AAACDAA02A4A6C63AFF37D7F58B47BB3CAB08AFEAA955142536A58DA195E28A33C1030B737017D68CF2597D8A8379B4694EE7A46F4AB466DB88E2695EC0D941B0DD8258B152A6C8EC09E4D382983419023184F0229959547F79057EA050578EE7DD88E2E4E8F9B95F069F97576029AB1E64DBE38ADBB779CB4EADEE37D599335A96520DE7715F47B0E10F8BA1D45DA9737F07BD974EE5955405C782DBF07B21923386F0B8671DDEEA729CF96456A8703921FA1FF8E80EA965530C4333C52B811A27BED28D2CB48A73A60ABC38CEE3C370F05680E2E2FD2D346A9C7084DD2E02727E0C8CC6CB42437FCBC77327687F31F2728F49C8EBBE5EB8C361551A8B9A5D30D864960CEB6A4DCBC80610D0A8A5452ED062D83660ACE6368A370BF08A7C1B0D0479AD1321685A54DE786CE2B9E968B15FEBE3D9F294C7B212A8F1BEE67EFEBEF9BAA7A1029B72201677FC3A7DDCADB4068605AC01B85E3B03656352DF66FED35F973117CB722990D02AEB13FE26625CA762E6C96B25D0C262A62CA4F3DE50878DEB4FF055A52735A3B79BC68384FD42FBFAAD037D7183EAAB6DEFE9D3511FE84858F659EF3C508171C3D21F846506EFBB43D794C96112AA679DBB82A414D3A93E48F1BFEC1C2A39395529DAD4CC9EAD324412380D4986D89EBB5D40CF42469DFEB1CEA3043D651E4C988530A5958DFCC553B0CB44E49F6DEB60C871B531525C9D1CFD71D30ADBE4373B58B5B6AB8A8C922F9A465BD18E835D3E78A92381459ED0339AA1DBEA62A34D15279E2DEC168145B5FCA3322C3B8C161276B4BBBB08C2D99B1F259AFFA9D05C399308D192AC456F8909CF16FB77141479C084467DC4A8134ED2F8A78FF5170D71D9'
const laravelSampleDecryptedResponse = 'payerName=name&payerEmail=Test@email.in&payerMobile=1234567890&clientTxnId=4662&payerAddress=Patna, Bihar&amount=10.0&clientCode=DJ020&paidAmount=10.0&paymentMode=NetBanking&bankName=SabPaisaBank&amountType=INR&status=SUCCESS&statusCode=0000&challanNumber=null&sabpaisaTxnId=SP1234567890123456&sabpaisaMessage=Transaction is successfully done&bankMessage=Approved&bankErrorCode=null&sabpaisaErrorCode=null&bankTxnId=NB123456789&transDate=Mon Jun 30 13:09:00 IST 2025&udf1=NA&udf2=NA&udf3=NA&udf4=NA&udf5=NA&udf6=NA&udf7=NA&udf8=NA&udf9=null&udf10=null&udf11=null&udf12=null&udf13=null&udf14=null&udf15=null&udf16=null&udf17=null&udf18=null&udf19=null&udf20=null&rrn=SP6042619113689'


const pythonRequestParameters: IntegrationKitDoc['requestParameters'] = [
  { name: 'payerName', type: 'Alphabet', required: true, description: 'Name of Payer (max 100 characters).' },
  { name: 'payerEmail', type: 'Alphabet', required: true, description: 'Email of Payer (max 100 characters).' },
  { name: 'payerMobile', type: 'Numeric', required: true, description: 'Mobile number of the payer (max 20 digits).' },
  { name: 'clientTxnId', type: 'AlphaNumeric', required: true, description: 'Transaction Id generated by Client (max 100 characters).' },
  { name: 'payerAddress', type: 'AlphaNumeric', required: false, description: 'Address of the payer (optional, max 255 characters).' },
  { name: 'amount', type: 'Numeric', required: true, description: 'Amount entered by the payer (max 10 digits).' },
  { name: 'clientCode', type: 'AlphaNumeric', required: true, description: 'Client Code (5 characters).' },
  { name: 'transUserName', type: 'AlphaNumeric', required: true, description: 'Username shared by SabPaisa (max 50 characters).' },
  { name: 'transUserPassword', type: 'AlphaNumeric', required: true, description: 'Password shared by SabPaisa (max 50 characters).' },
  { name: 'callbackUrl', type: 'AlphaNumeric', required: true, description: 'URL to get the response from SabPaisa (max 255 characters).' },
  { name: 'amountType', type: 'Alphabet', required: false, description: 'Currency type of amount INR, USD.' },
  ...Array.from({ length: 20 }, (_, index) => ({
    name: `udf${index + 1}`,
    type: 'AlphaNumeric',
    required: false,
    description: `User Defined Field ${index + 1} (optional, max 255 characters).`
  })),
  { name: 'channelId', type: 'Alphabet', required: true, description: "For the web use 'W'.For the mobile use 'M'.For npm, use 'npm'." },
  { name: 'programId', type: 'AlphaNumeric', required: false, description: 'Master Client Code (optional, 255 characters).' },
  { name: 'mcc', type: 'Numeric', required: true, description: 'Merchant Category Code (20 digits).' },
  { name: 'transDate', type: 'Datetime', required: true, description: 'Format: ("2025-02-17 13:47:22").' }
]

const pythonResponseParameters: IntegrationKitDoc['responseParameters'] = [
  { name: 'payerName', type: 'Alphabet', description: 'Name of the payer.' },
  { name: 'payerEmail', type: 'AlphaNumeric', description: 'Email of the payer.' },
  { name: 'payerMobile', type: 'Numeric', description: 'Mobile number of the payer.' },
  { name: 'clientTxnId', type: 'AlphaNumeric', description: 'Transaction Id generated by Client.' },
  { name: 'payerAddress', type: 'AlphaNumeric', description: 'Address of the payer.' },
  { name: 'amount', type: 'Numeric', description: 'Amount of transaction.' },
  { name: 'clientCode', type: 'Alphabet', description: 'Client Code.' },
  { name: 'paidAmount', type: 'Numeric', description: 'Total amount paid.' },
  { name: 'paymentMode', type: 'Alphabet', description: 'Mode of the Payment.' },
  { name: 'bankName', type: 'Alphabet', description: 'Name of bank.' },
  { name: 'amountType', type: 'Alphabet', description: 'Currency type of amount - INR,USD.' },
  ...Array.from({ length: 20 }, (_, index) => ({
    name: `udf${index + 1}`,
    type: 'AlphaNumeric',
    description: `User Defined Field ${index + 1}`
  })),
  { name: 'statusCode', type: 'Numeric', description: 'Status Code.' },
  { name: 'challanNumber', type: 'AlphaNumeric', description: 'Challan Number.' },
  { name: 'sabpaisaTxnId', type: 'Alphabet', description: 'Transaction Id generation at SabPaisa.' },
  { name: 'sabpaisaMessage', type: 'AlphaNumeric', description: 'Response Message from SabPaisa.' },
  { name: 'bankMessage', type: 'AlphaNumeric', description: 'Response Message from Bank.' },
  { name: 'bankErrorCode', type: 'AlphaNumeric', description: 'Error Code given by Bank.' },
  { name: 'sabpaisaErrorCode', type: 'AlphaNumeric', description: 'Error Code given by SabPaisa.' },
  { name: 'bankTxnId', type: 'AlphaNumeric', description: 'Transaction Id generated by bank.' },
  { name: 'programId', type: 'AlphaNumeric', description: 'Master Client Code.' },
  { name: 'mcc', type: 'Numeric', description: 'Merchant Category Code.' },
  { name: 'transDate', type: 'Numeric', description: 'Format : ("2025-02-17 13:47:22").' }
]

const pythonKitRequestFormat: IntegrationKitDoc['requestFormat'] = {
  transport: 'Send a POST request to sabPaisaInit?v=1 with form fields encData and clientCode (method = post).',
  headers: ['Content-Type: application/x-www-form-urlencoded'],
  bodyNotes: [
    'Concatenate mandatory parameters into key=value pairs joined with & and encrypt to produce encData (HEX).',
    'Submit only encData and clientCode in the outbound form.',
    'Ensure HTTPS URLs differ for staging and production environments.'
  ]
}

const pythonKitResponseFormat: IntegrationKitDoc['responseFormat'] = {
  transport: 'SabPaisa posts encResponse to the merchant callback URL; decrypt with the same authKey/authIV and split by &.',
  notes: [
    'Callback Response method: POST parameter encResponse.',
    'Decrypt to retrieve key/value pairs and update your system.',
    'Use the payment status codes table (0000 success, 0300 failed, etc.).'
  ]
}

const pythonSampleEncryptedRequest = 'encData:A8ECE8F6AF57BD264B4F51369DE2A95F37B81B4A3AF41B1C8825ACB3B4B04FA7A4194A933365875ADB6FA68529A5A58F742E502C13BB8022C8711048A0DE8D52B62EB27AA437CD273CF9747BBE5F3E5B6E2DB6C96301D2DCDA39769758772BB0027FAA3CB89E67074C1193EFEC1E1E155D603CCDDD6BB2BC4C2CDB78212D745AD583CC7F7694149C00BF8AC3D3EFAE8D55788B30F6C1964211C97304309FAF65B9F53839AE7D95EAA4D6CB25696129AF8673232599FA1B3758E4C88EF08007EFB8BC0EF610A122F1794B637E2BCBB9E2EA31102C85427EA113E91104084503FA420886006778E2694350F023F33ED15ADE036442706F8416579E12E92F8DCD7790C18914A3089B7CDD1F549D2215EE9056FFDDB5D246A856D2325380AAEEED0ACBB2BD8AF32997921E19D9C23FBB3C9BC3FA84F785304900'
const pythonSampleDecryptedRequest = 'payerName=vimalkumar&payerEmail=xyz@gmail.com&payerMobile=987456321&clientTxnId=SD2MHLRTP2UKZ2B7AYGY&amount=5&clientCode=DJ020&transUserName=DJL754@sp&transUserPassword=4q3qhgmJNM4m&callbackUrl=http://localhost:8080/response&channelId=W'
const pythonSampleEncryptedResponse = 'encResponse: 6675E6836AC42838C9531381EEC1846A5DA18A77C57FC1E623AB7F7AA8A7CDA45DF696B15B11D259C5A4A40C6022F4CF8A5EB2FCB2ECDB1946A696470E01B305B83554CE6B34597B501712877C35E1B9FE75AD29DE7BF674AED29132655E4432199DEC8D02652D48EF32C81321F049E791E8C28076EB399185BE7BD2CE2E413B410495D53E3C8BF9B506D0D6CA9EE867DF8F1B6CBD5FBB76315CDE59CFBA5C7AE6EDC08A280AFB0FE663D37628B9BD1A5B2D9D2C8F34CEF6739E7C4A1A477046C5B1EFE1DE797C599A9F378C41D32B735F73CC1CE928EAB21E22915B477B8BF1F962866CBEA8819223BEE7F96AF3162AD33301D5FF0697C49112E09DA70CDE489CC3CBA8D8E745DE76E85E512ECE7CF199FE88D8DE5494E42A450E3A5D8B390BEEED35A82722491BAF441E5BF992A736A083ADA5478D7714F7E16FC858033194F22DCD99CC085062C754176022BE7953C452BF6B1E0065919B65AC388BD4ED2500A5CB7DEC828300827FE66F6EAA9C811D472E0EB09BED9D376A67C30E75AAFF7FBCBC36605490C5179DC315C80B8018F5624C504DBB3CDEA03785E72934642EE05549A5F392C8064BF8C38393472F45B3B24C9F2941DCA8BFA3D19AB9107C7054943EA6EF5AF9C6E6C1F0DB9920AE7367E2376B750BC47B6A3BB110DC0CA720063E3BD4CD55B13C63070253B518D65F18848EAE15ED70ABC64A23C140E50E6C6237A3059B2FAD0F0AC9E11F048BB3DACB44F3BA238B71300C835D1EAD7DCC4A02E9EE3FF4E651082CF6CF9C76CED6C90895C05C650D0F01C240B1959D49F305AB706C4F1FC9AE97F611C050FBCF465870C44755FF03D33DFEA84EE1AFE31DB14D8F680598EBBC2C9E742F0CEABDD008254FF9941FB0A32D9B4A6BD6B88254B91F876B260710A08B1EDF81B4B478000A6C9AF9887A224E5388B55BF46AAB844D224A4777377F36C8982DCB1E1014A3E07EBADEB8F70ED9B45A3515F759075B19102D3CF59D88D7844CB8B520DD60AD7CA5C633918FC5'
const pythonSampleDecryptedResponse = 'payerName=vimalkumar&payerEmail=xyz@gmail.com&payerMobile=987456321&clientTxnId=SD2MHLRTP2UKZ2B7AYGY&payerAddress=NA&amount=5.0&clientCode=DJ020&paidAmount=null&paymentMode=&bankName=&amountType=INR&status=ABORTED&statusCode=0200&challanNumber=null&sabpaisaTxnId=&sabpaisaMessage=Payer cancelled the transaction before completion&bankMessage=&bankErrorCode=&sabpaisaErrorCode=CH0005&bankTxnId=&transDate=Mon Jun 30 13:09:00 IST 2025&udf1=NA&udf2=NA&udf3=NA&udf4=NA&udf5=NA&udf6=NA&udf7=NA&udf8=NA&udf9=null&udf10=null&udf11=null&udf12=null&udf13=null&udf14=null&udf15=null&udf16=null&udf17=null&udf18=null&udf19=null&udf20=null&rrn='

const dotnetRequestParameters: IntegrationKitDoc['requestParameters'] = [
  { name: 'payerName', type: 'Alphabet', required: true, description: 'Name of Payer (max 100 characters).' },
  { name: 'payerEmail', type: 'Alphabet', required: true, description: 'Email of Payer (max 100 characters).' },
  { name: 'payerMobile', type: 'Numeric', required: true, description: 'Mobile number of the payer (max 20 digits).' },
  { name: 'clientTxnId', type: 'AlphaNumeric', required: true, description: 'Transaction Id generated by Client (max 100 characters).' },
  { name: 'payerAddress', type: 'AlphaNumeric', required: false, description: 'Address of the payer (optional, max 255 characters).' },
  { name: 'amount', type: 'Numeric', required: true, description: 'Amount entered by the payer (max 10 digits).' },
  { name: 'clientCode', type: 'AlphaNumeric', required: true, description: 'Client Code (5 characters).' },
  { name: 'transUserName', type: 'AlphaNumeric', required: true, description: 'Username shared by SabPaisa (max 50 characters).' },
  { name: 'transUserPassword', type: 'AlphaNumeric', required: true, description: 'Password shared by SabPaisa (max 50 characters).' },
  { name: 'callbackUrl', type: 'AlphaNumeric', required: true, description: 'URL to get the response from SabPaisa (max 255 characters).' },
  { name: 'amountType', type: 'Alphabet', required: false, description: 'Currency type of amount INR, USD.' },
  ...Array.from({ length: 20 }, (_, index) => ({
    name: `udf${index + 1}`,
    type: 'AlphaNumeric',
    required: false,
    description: `User Defined Field ${index + 1} (optional, max 255 characters).`
  })),
  { name: 'channelId', type: 'Alphabet', required: true, description: "For the web use 'W'.For the mobile use 'M'.For npm, use 'npm'." },
  { name: 'programId', type: 'AlphaNumeric', required: false, description: 'Master Client Code (optional, 255 characters).' },
  { name: 'mcc', type: 'Numeric', required: true, description: 'Merchant Category Code (20 digits).' },
  { name: 'transDate', type: 'Datetime', required: true, description: 'Format: ("2025-02-17 13:47:22").' }
]

const dotnetResponseParameters: IntegrationKitDoc['responseParameters'] = [
  { name: 'payerName', type: 'Alphabet', description: 'Name of the payer.' },
  { name: 'payerEmail', type: 'AlphaNumeric', description: 'Email of the payer.' },
  { name: 'payerMobile', type: 'Numeric', description: 'Mobile number of the payer.' },
  { name: 'clientTxnId', type: 'AlphaNumeric', description: 'Transaction Id generated by Client.' },
  { name: 'payerAddress', type: 'AlphaNumeric', description: 'Address of the payer.' },
  { name: 'amount', type: 'Numeric', description: 'Amount of transaction.' },
  { name: 'clientCode', type: 'Alphabet', description: 'Client Code.' },
  { name: 'paidAmount', type: 'Numeric', description: 'Total amount paid.' },
  { name: 'paymentMode', type: 'Alphabet', description: 'Mode of the Payment.' },
  { name: 'bankName', type: 'Alphabet', description: 'Name of bank.' },
  { name: 'amountType', type: 'Alphabet', description: 'Currency type of amount - INR,USD.' },
  ...Array.from({ length: 20 }, (_, index) => ({
    name: `udf${index + 1}`,
    type: 'AlphaNumeric',
    description: `User Defined Field ${index + 1}`
  })),
  { name: 'statusCode', type: 'Numeric', description: 'Status Code.' },
  { name: 'challanNumber', type: 'AlphaNumeric', description: 'Challan Number.' },
  { name: 'sabpaisaTxnId', type: 'Alphabet', description: 'Transaction Id generation at SabPaisa.' },
  { name: 'sabpaisaMessage', type: 'AlphaNumeric', description: 'Response Message from SabPaisa.' },
  { name: 'bankMessage', type: 'AlphaNumeric', description: 'Response Message from Bank.' },
  { name: 'bankErrorCode', type: 'AlphaNumeric', description: 'Error Code given by Bank.' },
  { name: 'sabpaisaErrorCode', type: 'AlphaNumeric', description: 'Error Code given by SabPaisa.' },
  { name: 'bankTxnId', type: 'AlphaNumeric', description: 'Transaction Id generated by bank.' },
  { name: 'programId', type: 'AlphaNumeric', description: 'Master Client Code.' },
  { name: 'mcc', type: 'Numeric', description: 'Merchant Category Code.' },
  { name: 'transDate', type: 'Numeric', description: 'Format: ("2025-02-17 13:47:22").' }
]

const dotnetRequestFormat: IntegrationKitDoc['requestFormat'] = {
  transport: 'Send a POST request (HTML form or ASP.NET view) to SabPaisa init URL with encData and clientCode.',
  headers: ['Content-Type: application/x-www-form-urlencoded'],
  bodyNotes: [
    'Concatenate mandatory parameters into key=value pairs joined with & and encrypt to produce encData.',
    'Include encData and clientCode as hidden inputs when submitting the form.',
    'Use staging and production URLs shared by SabPaisa and ensure HTTPS.'
  ]
}

const dotnetResponseFormat: IntegrationKitDoc['responseFormat'] = {
  transport: 'SabPaisa posts encResponse to the callback URL; decrypt it with the same authKey/authIV and parse key=value pairs.',
  notes: [
    'Callback Response is sent as POST parameter encResponse.',
    'Decrypt and split on & to retrieve discrete fields.',
    'Use payment status codes (0000 success, 0300 failed, etc.) for next actions.'
  ]
}

const dotnetSampleEncryptedRequest = 'encData:B02DAE5DDE064E91BD5686DBA74AB9F7C647ED5DA35550F297756E1D98B059898DFEBFE3FCE20E0F60BC9D62A32ABED81D6D66C2B614C82CD04C7E0E0AF3C36C4F44CF640FE4010ADD4F79C207681FAEF7CB5FDE269404641E334ED91EA9CF797DB6CB8981767A46FED545D607FDB0B31B21060CA2F35C6564598A6DE64D1FE51BE4520A6C6B507B4E1DAB3A7F76C0E2CDEBADB976D2BBF52179D104D5E65BD8B6A8B2C637909869EF3E49BB0CED0DCD3A7B575C67597930EBFE788B7827E1DB347E56EA85CB66E0D12B8EAA0F8DD0DA4B98DEF8FF0C040201E960A7B2F5A6A289F92844F29863FC56764EEEB033CCE9584DF15BF47B63936F03E485423F645835D8CF38AF33C6FD3F2C7571B8CB116A87BCA86465A6455A7ECBD009B33C169CE6E0DF9D8C8D3240DC55EFD1377B3E37085C97C8DB8EBACA1A5E5327DA24BFA9A8D20E89638FF1F0DBE1359E35E02BD6917CAB82FC1FF09902E102354058843971BD3BAFC3E24AC3EED3C0'
const dotnetSampleDecryptedRequest = 'payerName=vimalkumar&payerEmail=xyz@gmail.com&payerMobile=987456321&clientTxnId=SD2MHLRTP2UKZ2B7AYGY&amount=5&clientCode=DJ020&transUserName=DJL754@sp&transUserPassword=4q3qhgmJNM4m&callbackUrl=http://localhost:8080/response&channelId=W'
const dotnetSampleEncryptedResponse = 'encResponse: 6675E6836AC42838C9531381EEC1846A5DA18A77C57FC1E623AB7F7AA8A7CDA45DF696B15B11D259C5A4A40C6022F4CF8A5EB2FCB2ECDB1946A696470E01B305B83554CE6B34597B501712877C35E1B9FE75AD29DE7BF674AED29132655E4432199DEC8D02652D48EF32C81321F049E791E8C28076EB399185BE7BD2CE2E413B410495D53E3C8BF9B506D0D6CA9EE867DF8F1B6CBD5FBB76315CDE59CFBA5C7AE6EDC08A280AFB0FE663D37628B9BD1A5B2D9D2C8F34CEF6739E7C4A1A477046C5B1EFE1DE797C599A9F378C41D32B735F73CC1CE928EAB21E22915B477B8BF1F962866CBEA8819223BEE7F96AF3162AD33301D5FF0697C49112E09DA70CDE489CC3CBA8D8E745DE76E85E512ECE7CF199FE88D8DE5494E42A450E3A5D8B390BEEED35A82722491BAF441E5BF992A736A083ADA5478D7714F7E16FC858033194F22DCD99CC085062C754176022BE7953C452BF6B1E0065919B65AC388BD4ED2500A5CB7DEC828300827FE66F6EAA9C811D472E0EB09BED9D376A67C30E75AAFF7FBCBC36605490C5179DC315C80B8018F5624C504DBB3CDEA03785E72934642EE05549A5F392C8064BF8C38393472F45B3B24C9F2941DCA8BFA3D19AB9107C7054943EA6EF5AF9C6E6C1F0DB9920AE7367E2376B750BC47B6A3BB110DC0CA720063E3BD4CD55B13C63070253B518D65F18848EAE15ED70ABC64A23C140E50E6C6237A3059B2FAD0F0AC9E11F048BB3DACB44F3BA238B71300C835D1EAD7DCC4A02E9EE3FF4E651082CF6CF9C76CED6C90895C05C650D0F01C240B1959D49F305AB706C4F1FC9AE97F611C050FBCF465870C44755FF03D33DFEA84EE1AFE31DB14D8F680598EBBC2C9E742F0CEABDD008254FF9941FB0A32D9B4A6BD6B88254B91F876B260710A08B1EDF81B4B478000A6C9AF9887A224E5388B55BF46AAB844D224A4777377F36C8982DCB1E1014A3E07EBADEB8F70ED9B45A3515F759075B19102D3CF59D88D7844CB8B520DD60AD7CA5C633918FC5'
const dotnetSampleDecryptedResponse = 'payerName=vimalkumar&payerEmail=xyz@gmail.com&payerMobile=987456321&clientTxnId=SD2MHLRTP2UKZ2B7AYGY&payerAddress=NA&amount=5.0&clientCode=DJ020&paidAmount=null&paymentMode=&bankName=&amountType=INR&status=ABORTED&statusCode=0200&challanNumber=null&sabpaisaTxnId=&sabpaisaMessage=Payer cancelled the transaction before completion&bankMessage=&bankErrorCode=&sabpaisaErrorCode=CH0005&bankTxnId=&transDate=Mon Jun 30 13:09:00 IST 2025&udf1=NA&udf2=NA&udf3=NA&udf4=NA, ...'

const reactRequestParameters: IntegrationKitDoc['requestParameters'] = [
  { name: 'payerName', type: 'Alphabet', required: true, description: 'Name of payer displayed on the hosted form (max 100 characters).' },
  { name: 'payerEmail', type: 'Alphabet', required: true, description: 'Email of the payer (max 100 characters).' },
  { name: 'payerMobile', type: 'Numeric', required: true, description: 'Payer mobile number (max 20 digits).' },
  { name: 'clientTxnId', type: 'AlphaNumeric', required: true, description: 'Unique transaction ID generated in the React app (max 100 characters).' },
  { name: 'payerAddress', type: 'AlphaNumeric', required: false, description: 'Optional payer address (max 255 characters).' },
  { name: 'amount', type: 'Numeric', required: true, description: 'Amount to be charged (max 10 digits).' },
  { name: 'clientCode', type: 'AlphaNumeric', required: true, description: 'SabPaisa client code supplied via props.' },
  { name: 'transUserName', type: 'AlphaNumeric', required: true, description: 'SabPaisa transaction username shared with the merchant.' },
  { name: 'transUserPassword', type: 'AlphaNumeric', required: true, description: 'SabPaisa transaction password shared with the merchant.' },
  { name: 'callbackUrl', type: 'AlphaNumeric', required: true, description: 'HTTPS callback URL where SabPaisa posts encResponse.' },
  { name: 'amountType', type: 'Alphabet', required: false, description: 'Currency code such as INR or USD (optional).' },
  ...Array.from({ length: 20 }, (_, index) => ({
    name: `udf${index + 1}`,
    type: 'AlphaNumeric',
    required: false,
    description: `Optional user-defined field ${index + 1} (max 255 characters).`
  })),
  { name: 'channelId', type: 'Alphabet', required: true, description: "Channel identifier: use 'npm' for sabpaisa-pg-dev React integrations." },
  { name: 'programId', type: 'AlphaNumeric', required: false, description: 'Optional master client code.' },
  { name: 'mcc', type: 'Numeric', required: true, description: 'Merchant category code provided by SabPaisa.' },
  { name: 'transDate', type: 'Datetime', required: true, description: 'Transaction timestamp (yyyy-MM-dd HH:mm:ss).' }
]

const reactResponseParameters: IntegrationKitDoc['responseParameters'] = [
  { name: 'payerName', type: 'Alphabet', description: 'Name returned in the payment callback.' },
  { name: 'payerEmail', type: 'AlphaNumeric', description: 'Email provided by the payer.' },
  { name: 'payerMobile', type: 'Numeric', description: 'Mobile number echoed from the transaction.' },
  { name: 'clientTxnId', type: 'AlphaNumeric', description: 'Merchant transaction ID used to initiate the payment.' },
  { name: 'payerAddress', type: 'AlphaNumeric', description: 'Payer address when supplied.' },
  { name: 'amount', type: 'Numeric', description: 'Amount requested.' },
  { name: 'clientCode', type: 'Alphabet', description: 'Client code mapped to the merchant account.' },
  { name: 'paidAmount', type: 'Numeric', description: 'Total amount paid (may include charges/discounts).' },
  { name: 'paymentMode', type: 'Alphabet', description: 'Payment option selected by the customer.' },
  { name: 'bankName', type: 'Alphabet', description: 'Bank name returned in the callback.' },
  { name: 'amountType', type: 'Alphabet', description: 'Currency code of the processed payment.' },
  ...Array.from({ length: 20 }, (_, index) => ({
    name: `udf${index + 1}`,
    type: 'AlphaNumeric',
    description: `User defined field ${index + 1} echoed in the response.`
  })),
  { name: 'status', type: 'Alphabet', description: 'Transaction status (SUCCESS/FAILED/ABORTED/etc.).' },
  { name: 'statusCode', type: 'Numeric', description: 'SabPaisa status code (0000 success, 0300 failed, etc.).' },
  { name: 'challanNumber', type: 'AlphaNumeric', description: 'Challan reference for offline payments if generated.' },
  { name: 'sabpaisaTxnId', type: 'Alphabet', description: 'SabPaisa-generated transaction reference.' },
  { name: 'sabpaisaMessage', type: 'AlphaNumeric', description: 'Gateway message summarising the outcome.' },
  { name: 'bankMessage', type: 'AlphaNumeric', description: 'Message returned by issuing bank.' },
  { name: 'bankErrorCode', type: 'AlphaNumeric', description: 'Error code supplied by the bank on failure.' },
  { name: 'sabpaisaErrorCode', type: 'AlphaNumeric', description: 'SabPaisa error code when applicable.' },
  { name: 'bankTxnId', type: 'AlphaNumeric', description: 'Bank transaction identifier.' },
  { name: 'programId', type: 'AlphaNumeric', description: 'Program or master client code echoed back.' },
  { name: 'mcc', type: 'Numeric', description: 'Merchant category code returned in the payload.' },
  { name: 'transDate', type: 'Datetime', description: 'Timestamp recorded by SabPaisa.' }
]

const reactRequestFormat: IntegrationKitDoc['requestFormat'] = {
  transport: 'Embed the sabpaisa-pg-dev PaymentForm component inside your React app and supply SabPaisa credentials via props; the component posts encData/clientCode to the staging or production init URL.',
  headers: [
    'sabpaisa-pg-dev internally posts as application/x-www-form-urlencoded',
    "env prop accepts 'stag' or 'prod' to direct traffic"
  ],
  bodyNotes: [
    'Install with npm install sabpaisa-pg-dev and wrap it inside your React view.',
    'Populate props such as clientCode, transUserName, transUserPassword, authKey, authIV, callbackUrl, clientTxnId, payerName, payerEmail, payerMobile, amount, channelId (npm), and url.',
    'Keep sensitive credentials outside version control; inject them via environment variables or secure config services.'
  ]
}

const reactResponseFormat: IntegrationKitDoc['responseFormat'] = {
  transport: 'sabpaisa-pg-dev calls the callbackFunction prop with the decrypted SabPaisa response payload so your React component can update UI/state.',
  notes: [
    'Use the callback to show status, persist data to your backend, or trigger navigation.',
    'Validate critical fields (status, statusCode, sabpaisaTxnId) before marking an order paid.',
    'For production, relay the callback data to a secure API for reconciliation and audit.'
  ]
}

const reactSampleRequest = `SabPaisaPaymentForm.js\nimport React from 'react'\nimport PaymentForm from 'sabpaisa-pg-dev'\n\nconst SabPaisaPaymentForm = ({ formData, onResponse }) => (\n  <PaymentForm\n    {...formData}\n    callbackFunction={onResponse}\n    env="stag"\n  />\n)\n\nexport default SabPaisaPaymentForm\n\nApp.js\nimport React, { useState } from 'react'\nimport SabPaisaPaymentForm from './SabPaisaPaymentForm'\n\nconst App = () => {\n  const [paymentData] = useState({\n    clientCode: 'DJ020',\n    transUserName: 'DJL754@sp',\n    transUserPassword: '4q3qhgmJNM4m',\n    authKey: 'BASE64_AES_KEY',\n    authIV: 'BASE64_IV',\n    callbackUrl: 'https://your-site.com/callback',\n    clientTxnId: '123345555557',\n    payerName: 'John Doe',\n    payerEmail: 'john@example.com',\n    payerMobile: '9876543210',\n    amount: '100.00',\n    channelId: 'npm',\n    url: 'https://securepay.sabpaisa.in/SabPaisa/sabPaisaInit?v=1'\n  })\n\n  const handlePaymentResponse = (response) => {\n    console.log('Payment Gateway Response:', response)\n  }\n\n  return (\n    <SabPaisaPaymentForm\n      formData={paymentData}\n      onResponse={handlePaymentResponse}\n    />\n  )\n}\n\nexport default App`

const reactSampleResponse = `handlePaymentResponse console output\nPayment Gateway Response: {\n  status: 'SUCCESS',\n  statusCode: '0000',\n  clientCode: 'DJ020',\n  clientTxnId: '123345555557',\n  sabpaisaTxnId: '347730705250114130',\n  paymentMode: 'NETBANKING',\n  bankName: 'SabPaisaBank',\n  paidAmount: '100.00',\n  sabpaisaMessage: 'Transaction is successfully done',\n  bankMessage: 'Approved',\n  transDate: '2025-02-17 13:47:22'\n}`

const flutterRequestFormat: IntegrationKitDoc['requestFormat'] = {
  transport:
    'Use the sabpaisa_flutter SDK to launch the SabPaisa checkout inside a Flutter webview; the plugin posts encData and clientCode on your behalf once you supply credentials.',
  headers: ['SDK internally submits application/x-www-form-urlencoded payloads.'],
  bodyNotes: [
    'Add sabpaisa_flutter:^0.2.2 to pubspec.yaml and run flutter packages get.',
    'Set Android minSdkVersion â‰¥ 19 in android/app/build.gradle and iOS deployment target â‰¥ 10.0 in Podfile.',
    'Build a payment options map containing payer details, client_code, user_name, password, aes_key, aes_iv, env (staging/prod), txn_id, amount, and callback_url before calling sabPaisa.open.'
  ]
}

const flutterResponseFormat: IntegrationKitDoc['responseFormat'] = {
  transport:
    'SabPaisa responses surface through SabPaisa.EVENT_PAYMENT_SUCCESS and EVENT_PAYMENT_ERROR callbacks, each returning TransactionResponsesModel decoded from encResponse.',
  notes: [
    'Update your order status based on TransactionResponsesModel.statusCode/status and log sabpaisaTxnId for reconciliation.',
    'Handle EVENT_PAYMENT_ERROR to retry or show failure messages; inspect bankMessage/bankErrorCode for details.'
  ]
}

const flutterSampleRequest = `pubspec.yaml
dependencies:
  sabpaisa_flutter: ^0.2.2

checkout.dart
import 'package:sabpaisa_flutter/sabpaisa_flutter.dart';

final SabPaisa sabPaisa = SabPaisa()
  ..on(SabPaisa.EVENT_PAYMENT_SUCCESS, _handlePaymentSuccess)
  ..on(SabPaisa.EVENT_PAYMENT_ERROR, _handlePaymentError);

void startPayment() {
  sabPaisa.open({
    'first_name': 'John',
    'last_name': 'Doe',
    'currency': 'INR',
    'mobile_number': '9999999999',
    'email_id': 'john.doe@example.com',
    'client_code': 'DJ020',
    'aes_iv': 'M+aUFgRMPq7ci+Cmoytp3KJ2GPBOwO72Z2Cjbr55zY7++pT9mLES2M5cIblnBtaX',
    'aes_key': 'ISTrmmDC2bTvkxzlDRrVguVwetGS8xC/UFPsp6w+Itg=',
    'user_name': 'JohnDoe',
    'password': 'password123',
    'env': 'staging', // use prod for live traffic
    'txn_id': 'TXN-123456',
    'amount': '1000',
    'callback_url': 'http://localhost:8082'
  });
}`

const flutterSampleResponse = `SabPaisa.EVENT_PAYMENT_SUCCESS
TransactionResponsesModel(
  clientTxnId: 'TXN-123456',
  sabpaisaTxnId: 'SP347730705250114130',
  statusCode: '0000',
  paymentMode: 'UPI',
  paidAmount: '1000',
  bankMessage: 'Approved',
  sabpaisaMessage: 'Transaction is successfully done'
)

SabPaisa.EVENT_PAYMENT_ERROR
TransactionResponsesModel(
  clientTxnId: 'TXN-123456',
  statusCode: '0300',
  sabpaisaMessage: 'Payment failed',
  bankMessage: 'Declined by issuer'
)`

const angularRequestParameters: IntegrationKitDoc['requestParameters'] = [
  { name: 'payerName', type: 'Alphabet', required: true, description: 'Name captured on the Angular payment form (max 100 characters).' },
  { name: 'payerEmail', type: 'Alphabet', required: true, description: 'Email of the payer (max 100 characters).' },
  { name: 'payerMobile', type: 'Numeric', required: true, description: 'Payer mobile number (max 20 digits).' },
  { name: 'clientTxnId', type: 'AlphaNumeric', required: true, description: 'Unique transaction ID the Angular app generates per attempt.' },
  { name: 'payerAddress', type: 'AlphaNumeric', required: false, description: 'Optional payer address (max 255 characters).' },
  { name: 'amount', type: 'Numeric', required: true, description: 'Amount to be collected (max 10 digits).' },
  { name: 'clientCode', type: 'AlphaNumeric', required: true, description: 'SabPaisa client code loaded from environment configuration.' },
  { name: 'transUserName', type: 'AlphaNumeric', required: true, description: 'SabPaisa transaction username provided to the merchant.' },
  { name: 'transUserPassword', type: 'AlphaNumeric', required: true, description: 'SabPaisa transaction password provided to the merchant.' },
  { name: 'callbackUrl', type: 'AlphaNumeric', required: true, description: 'URL where SabPaisa redirects/POSTs encResponse after checkout.' },
  { name: 'amountType', type: 'Alphabet', required: false, description: 'Currency code (INR/USD etc.).' },
  ...Array.from({ length: 20 }, (_, index) => ({
    name: `udf${index + 1}`,
    type: 'AlphaNumeric',
    required: false,
    description: `Optional user-defined field ${index + 1} (max 255 characters).`
  })),
  { name: 'channelId', type: 'Alphabet', required: true, description: "Channel flag: use 'npm' for sabpaisa-pg-sdk flows." },
  { name: 'programId', type: 'AlphaNumeric', required: false, description: 'Optional master client code (255 characters).' },
  { name: 'mcc', type: 'Numeric', required: true, description: 'Merchant category code provided by SabPaisa.' },
  { name: 'transDate', type: 'Datetime', required: true, description: 'Timestamp in yyyy-MM-dd HH:mm:ss format.' }
]

const angularResponseParameters: IntegrationKitDoc['responseParameters'] = [
  { name: 'payerName', type: 'Alphabet', description: 'Payer name returned via encResponse.' },
  { name: 'payerEmail', type: 'AlphaNumeric', description: 'Email address echoed by SabPaisa.' },
  { name: 'payerMobile', type: 'Numeric', description: 'Mobile number sent by the payer.' },
  { name: 'clientTxnId', type: 'AlphaNumeric', description: 'Merchant transaction ID used in the request.' },
  { name: 'payerAddress', type: 'AlphaNumeric', description: 'Payer address when provided.' },
  { name: 'amount', type: 'Numeric', description: 'Amount associated with the transaction.' },
  { name: 'clientCode', type: 'Alphabet', description: 'SabPaisa client code for the merchant.' },
  { name: 'paidAmount', type: 'Numeric', description: 'Final paid amount captured by SabPaisa.' },
  { name: 'paymentMode', type: 'Alphabet', description: 'Payment mode used (CARD/UPI/etc.).' },
  { name: 'bankName', type: 'Alphabet', description: 'Bank reported by SabPaisa/bank rails.' },
  { name: 'amountType', type: 'Alphabet', description: 'Currency associated with the transaction.' },
  ...Array.from({ length: 20 }, (_, index) => ({
    name: `udf${index + 1}`,
    type: 'AlphaNumeric',
    description: `User defined field ${index + 1} mirrored back.`
  })),
  { name: 'status', type: 'Alphabet', description: 'Transaction status (SUCCESS/FAILED/ABORTED/etc.).' },
  { name: 'statusCode', type: 'Numeric', description: 'SabPaisa status code (0000 success, 0300 failed, etc.).' },
  { name: 'challanNumber', type: 'AlphaNumeric', description: 'Challan number when offline collection is used.' },
  { name: 'sabpaisaTxnId', type: 'Alphabet', description: 'SabPaisa-generated transaction identifier.' },
  { name: 'sabpaisaMessage', type: 'AlphaNumeric', description: 'Message returned by SabPaisa.' },
  { name: 'bankMessage', type: 'AlphaNumeric', description: 'Message returned by the issuing bank.' },
  { name: 'bankErrorCode', type: 'AlphaNumeric', description: 'Bank error code (if any).' },
  { name: 'sabpaisaErrorCode', type: 'AlphaNumeric', description: 'SabPaisa error code (if any).' },
  { name: 'bankTxnId', type: 'AlphaNumeric', description: 'Bank transaction reference.' },
  { name: 'programId', type: 'AlphaNumeric', description: 'Program/master client code echoed back.' },
  { name: 'mcc', type: 'Numeric', description: 'Merchant category code returned.' },
  { name: 'transDate', type: 'Datetime', description: 'Timestamp recorded by SabPaisa.' }
]

const angularRequestFormat: IntegrationKitDoc['requestFormat'] = {
  transport: 'Import submitPaymentForm from sabpaisa-pg-sdk and invoke it from your Angular component. The SDK handles encryption and posts encData/clientCode to the selected SabPaisa init URL.',
  headers: [
    'SDK internally posts using application/x-www-form-urlencoded',
    'env property controls staging (STAG) vs production (PROD)' 
  ],
  bodyNotes: [
    'Store clientCode/trans credentials/auth keys in Angular environment files.',
    'Bind payer inputs (name, email, mobile, amount) to formState before calling submitPaymentForm.',
    'Ensure callbackUrl matches an Angular route that can parse encResponse.'
  ]
}

const angularResponseFormat: IntegrationKitDoc['responseFormat'] = {
  transport: 'SabPaisa redirects/POSTs encResponse to the configured callback route; parsePaymentResponse (sabpaisa-pg-sdk) decrypts the payload in Angular.',
  notes: [
    'Call parsePaymentResponse(authKey, authIV) inside your callback component to obtain key/value pairs.',
    'Display the decrypted entries or forward them to a backend for persistence.',
    'Check statusCode + sabpaisaTxnId before marking the order successful.'
  ]
}

const angularSampleRequest = `submitPaymentForm({\n  clientCode: environment.clientCode,\n  transUserName: environment.transUserName,\n  transUserPassword: environment.transUserPassword,\n  authKey: environment.authKey,\n  authIV: environment.authIV,\n  payerName: 'Vimal Kumar',\n  payerEmail: 'vimal.kumar@sabpaisa.in',\n  payerMobile: '6291312928',\n  amount: 25,\n  amountType: 'INR',\n  channelId: 'npm',\n  clientTxnId: 'ANG-1233445555',\n  env: 'STAG',\n  callbackUrl: environment.callbackUrl\n})`

const angularSampleResponse = 'encResponse=7255B9DB916F2162793CF8CEE374E8253BA53B0FE4DD8FEDC8254FFA637A29FBA26EC4C645B34FE6D197FE5439E4A38431DB2AE7EA0BB4630B135552912EB37CD976529BF6718E89931FF095B422378380112CD173391AA9D3D5E27C6E09DDDBA1261572B5A9C0FE3B0279E6794BBDC935434AF873EB40364888F0F28E144CF5E6DB5E447163E410A7CEF952019AC1CD63E1946D70303CFB9B9E2ACC18C0E4028A60FF58DBFF2BC1B0BE8F3292519C58F11813011BAB8E20A5E50CBE47C943F3B916AEC4D539A495178655A89DBE3116FAC9B06E4C5F9009BF313D7530C4488838C4D57894855485AB5B78881B0F4A9215D35611FF410B6DE1CCE17D0976DC56749D60C9D5E256CD033CD89981596FD49B72E8F29E7E7A58F32B1AEC709AA017C289EC3D6457046091038992D0A7E5F07A10C53D90A510012AA7F3CA88E666288E637632EA8BDC1E289308507F59164C3236399FF1B9882E05D7DC234098F13922EF663A0671FCF3BCCD80085D6D69D46D4EA7A528E9F8B5C461D862140ED87D45A1388430D13FDFFDDD8F3536DA9E53F8A3CE9A76B1603F0666BB7C7091D59499CF7CA8004A04FD3D2FAF5B64B7CBB086D7F471AB3948943BC321DAB58E846B84C72BB1E29AEA4AE776E30547724272123DDF1109DBB4D9F3D2D545055835C78520C3C496D81C5C9F3F75A8C21A2C860B8A4644C3C7D789F49988953033587688275A9AFFF43C4B4B1166302CBA8215C87295DBA435F36AD1CC0A4A9780C8F177CC3B822EE225268A7BE181D9419FD824046350DC72D4060F4241C2B99DC96EF67B862C2482020F613F5C5B5E8BC2A5FED28A43E239E2F9D5EC0258DE7ED7BD2E83AB2DEB7CBC3609BF2BA85DA0CC7171D213D8D7B8C4D7426A15C547ADA966C86AD4490AC1E9C8443472E9E5F33AB0BDFBC95DEEA16848ED1A8923DD1B07511EA4A6F53BC1476F931998228F60847D4F4983916A1C53B8C0DDC6DCF2B97721D5B06B0AE9886CCB553B847A0949799BDACE49FE68B2F898F2CCF8229F5CFF52FFF22EB1EA975F4EE9D6963DB292&clientCode=DJ020'


type Metadata = Record<string, string>

type CreatePayloadOptions = {
  initiatedBy: string
  metadata?: Metadata
  extras?: Record<string, unknown>
}

const createRequestPayload = ({
  initiatedBy,
  metadata = {},
  extras = {}
}: CreatePayloadOptions) =>
  toPrettyJson({
    merchantId: 'MERCHANT_SERVER',
    orderId: 'ORD-90210',
    amount: 125000,
    currency: 'INR',
    callbackUrl: 'https://merchant.example.com/payments/return',
    customer: {
      name: 'Aarav Malhotra',
      email: 'aarav@example.com',
      phone: '+919876543210'
    },
    paymentMethod: 'CARD',
    metadata: {
      initiatedBy,
      ...metadata
    },
    ...extras
  })

const createResponsePayload = ({
  initiatedBy,
  metadata = {},
  extras = {}
}: CreatePayloadOptions) =>
  toPrettyJson({
    paymentId: 'PAY-178234',
    status: 'PENDING',
    redirectUrl: 'https://checkout.sabpaisa.in/PAY-178234',
    expiresAt: '2025-02-01T12:30:00Z',
    referenceId: 'ORD-90210',
    metadata: {
      initiatedBy,
      ...metadata
    },
    signature: '7ad4f8d8a26d0e7b4fda716c3a0512fa',
    ...extras
  })

type BuildKitOptions = {
  purpose: string
  useCases: string[]
  prerequisites: string[]
  setup: string[]
  sampleCodeLink: string
  requestFormat?: IntegrationKitDoc['requestFormat']
  responseFormat?: IntegrationKitDoc['responseFormat']
  requestParameters?: IntegrationKitDoc['requestParameters']
  responseParameters?: IntegrationKitDoc['responseParameters']
  metadataTag: string
  requestMetadata?: Metadata
  responseMetadata?: Metadata
  requestExtras?: Record<string, unknown>
  responseExtras?: Record<string, unknown>
  endpoints?: IntegrationKitDoc['endpoints']
  integrationVideoLink?: string
  sampleEncryptedRequestOverride?: string
  sampleDecryptedRequestOverride?: string
  sampleEncryptedResponseOverride?: string
  sampleDecryptedResponseOverride?: string
}

const buildKit = (id: string, name: string, options: BuildKitOptions): IntegrationKitDoc => ({
  id,
  name,
  overview: {
    purpose: options.purpose,
    useCases: options.useCases,
    prerequisites: options.prerequisites,
    setup: options.setup
  },
  sampleCodeLink: options.sampleCodeLink,
  endpoints: options.endpoints ?? defaultEndpoints,
  requestFormat: options.requestFormat ?? defaultRequestFormat,
  requestParameters: options.requestParameters ?? defaultRequestParameters,
  sampleEncryptedRequest: options.sampleEncryptedRequestOverride ?? encryptedRequest,
  sampleDecryptedRequest:
    options.sampleDecryptedRequestOverride ??
    createRequestPayload({
      initiatedBy: options.metadataTag,
      metadata: options.requestMetadata,
      extras: options.requestExtras
    }),
  responseFormat: options.responseFormat ?? defaultResponseFormat,
  responseParameters: options.responseParameters ?? defaultResponseParameters,
  sampleEncryptedResponse: options.sampleEncryptedResponseOverride ?? encryptedResponse,
  sampleDecryptedResponse:
    options.sampleDecryptedResponseOverride ??
    createResponsePayload({
      initiatedBy: options.metadataTag,
      metadata: options.responseMetadata,
      extras: options.responseExtras
    }),
  integrationVideoLink: options.integrationVideoLink ?? defaultIntegrationVideoLink
})

const serverIntegrationKits: IntegrationKitDoc[] = [
  buildKit('java', 'Java', {
    purpose: 'Implement the SabPaisa payment gateway from Java or Spring services using encrypted payload hand-offs and seamless hosted checkout.',
    useCases: [
      'Java/Spring commerce portals that redirect payers to SabPaisa for secure checkout',
      'Enterprise or government applications needing encrypted payment initiation over HTTPS',
      'Legacy JEE systems migrating from other gateways while keeping server-side orchestration'
    ],
    prerequisites: [
      'Merchant runtime (Java/Spring) prepared with SabPaisa documentation, SDK, or plugin along with UAT credentials shared by SabPaisa',
      'Seamless flag enabled by the SabPaisa backend team for the merchant account',
      'Client code, transaction username/password, authKey, authIV, and callback URL stored securely in the application configuration'
    ],
    setup: [
      'Collect mandatory payer inputs (name, email, mobile, amount) on the merchant form and generate a unique clientTxnId for every attempt',
      'Build the request query string (key=value pairs joined with &) and encrypt it using AES256 + HMAC-SHA384 to produce encData',
      'POST encData and clientCode to the environment-specific init URL (sandbox or production) over HTTPS',
      'Let the payer authenticate on the SabPaisa payment page (OTP, card details, UPI PIN, etc.) and complete the payment',
      'Receive encResponse on the callbackUrl, decrypt using authKey/authIV, and update local order state using status/statusCode plus sabpaisaTxnId'
    ],
    sampleCodeLink: 'https://bitbucket.org/sabpaisa-wp-29/java2.0/src/main/',
    endpoints: {
      sandbox: 'https://stage-securepay.sabpaisa.in/SabPaisa/sabPaisaInit?v=1',
      production: 'https://securepay.sabpaisa.in/SabPaisa/sabPaisaInit?v=1'
    },
    metadataTag: 'JAVA_BACKEND',
    requestMetadata: { framework: 'SpringBoot' },
    responseMetadata: { framework: 'SpringBoot' },
    requestFormat: javaRequestFormat,
    requestParameters: javaRequestParameters,
    sampleEncryptedRequestOverride: javaSampleEncryptedRequest,
    sampleDecryptedRequestOverride: javaSampleDecryptedRequest,
    responseFormat: javaResponseFormat,
    responseParameters: javaResponseParameters,
    sampleEncryptedResponseOverride: javaSampleEncryptedResponse,
    sampleDecryptedResponseOverride: javaSampleDecryptedResponse,
    integrationVideoLink: 'https://youtu.be/d-MPz7mGSqY?si=HfAr0kA2psRuO9Lt'
  }),
  buildKit('php', 'PHP', {
    purpose: 'Integrate the SabPaisa payment gateway from PHP forms or cURL scripts using encrypted encData hand-offs and hosted checkout redirects.',
    useCases: [
      'PHP commerce portals that post payer details to SabPaisa for secure checkout',
      'Legacy CodeIgniter/Symfony forms needing encrypted payment initiation over HTTPS',
      'Back-office PHP scripts orchestrating server-to-server payment initiation'
    ],
    prerequisites: [
      'Merchant PHP environment set up with SabPaisa documentation or plugin plus UAT credentials shared by SabPaisa',
      'Seamless flag enabled for the merchant account by the SabPaisa backend team',
      'Server capable of HTTPS POST requests with a publicly reachable callback URL'
    ],
    setup: [
      'Collect mandatory payer details on the PHP form and generate a unique clientTxnId for every transaction attempt',
      'Concatenate all parameters into key=value pairs, encrypt them with AES256 HMAC-SHA384 to produce encData',
      'POST only encData and clientCode to the staging or production init URL using application/x-www-form-urlencoded',
      'Allow the payer to select payment mode on the SabPaisa hosted page and complete OTP/card/UPI verification',
      'Receive encResponse at the callbackUrl, decrypt it, and update order status based on status/statusCode and sabpaisaTxnId'
    ],
    sampleCodeLink: 'https://bitbucket.org/sabpaisa-wp-29/php2.0/src/main/',
    endpoints: {
      sandbox: 'https://stage-securepay.sabpaisa.in/SabPaisa/sabPaisaInit?v=1',
      production: 'https://securepay.sabpaisa.in/SabPaisa/sabPaisaInit?v=1'
    },
    metadataTag: 'PHP_GATEWAY',
    requestFormat: phpRequestFormat,
    requestParameters: phpRequestParameters,
    sampleEncryptedRequestOverride: phpSampleEncryptedRequest,
    sampleDecryptedRequestOverride: phpSampleDecryptedRequest,
    responseFormat: phpResponseFormat,
    responseParameters: phpResponseParameters,
    sampleEncryptedResponseOverride: phpSampleEncryptedResponse,
    sampleDecryptedResponseOverride: phpSampleDecryptedResponse,
    integrationVideoLink: 'https://youtu.be/EAPQ83F7lKY?si=K_8nAELl6QGyduhS'
  }),
  buildKit('laravel', 'Laravel', {
    purpose: 'Embed SabPaisa checkout into Laravel projects by encrypting encData server-side and forwarding customers to the hosted payment page.',
    useCases: [
      'Laravel commerce portals accepting card, UPI, and net banking payments via SabPaisa',
      'Government or PSU portals built on Laravel needing encrypted payment initiation',
      'NGO or education sites collecting donations/fees with quick SabPaisa redirects'
    ],
    prerequisites: [
      'Laravel 8/9/10 running on PHP 8.0+ with OpenSSL available',
      'Public HTTPS domain reachable by SabPaisa for callback delivery',
      'SabPaisa merchant clientCode, authKey, authIV, username, and password stored securely (env/secret manager)'
    ],
    setup: [
      'Collect mandatory payer info and amount inside Laravel, generating a unique clientTxnId per attempt',
      'Concatenate key=value pairs (sequence matters) and encrypt using AES-256-GCM + HMAC-SHA384 to produce encData (HEX)',
      'POST only encData and clientCode to the sandbox/live sabPaisaInit URLs via Blade form or controller POST',
      'Allow the payer to finish authentication on SabPaisa; they are redirected afterward',
      'Handle the callback route, decrypt encResponse, update the order, and render a confirmation view'
    ],
    sampleCodeLink: 'https://bitbucket.org/sabpaisa-wp-29/laravel2.0/src/main/',
    endpoints: {
      sandbox: 'https://stage-securepay.sabpaisa.in/SabPaisa/sabPaisaInit?v=1',
      production: 'https://securepay.sabpaisa.in/SabPaisa/sabPaisaInit?v=1'
    },
    metadataTag: 'LARAVEL_BACKEND',
    requestFormat: laravelRequestFormat,
    requestParameters: laravelRequestParameters,
    sampleEncryptedRequestOverride: laravelSampleEncryptedRequest,
    sampleDecryptedRequestOverride: laravelSampleDecryptedRequest,
    responseFormat: laravelResponseFormat,
    responseParameters: laravelResponseParameters,
    sampleEncryptedResponseOverride: laravelSampleEncryptedResponse,
    sampleDecryptedResponseOverride: laravelSampleDecryptedResponse,
    integrationVideoLink: 'https://youtu.be/b0DmQU-zYiI?si=teUyf5gIICFJrhPg'
  }),
  buildKit('nodejs', 'Node.js', {
    purpose: 'Trigger SabPaisa hosted checkout from Node.js servers by encrypting encData payloads and posting them via HTTPS form submissions.',
    useCases: [
      'Express or Fastify apps collecting payer details then redirecting to SabPaisa',
      'Next.js or Remix API routes orchestrating secure payment initiation on the server',
      'Node-based CLI/back-office jobs initiating payments and decoding callbacks'
    ],
    prerequisites: [
      'Node.js environment configured per SabPaisa guide with UAT credentials shared by SabPaisa',
      'Server capable of HTTPS POSTs plus a publicly reachable callback URL',
      'Seamless flag enabled for the merchant account before production cutover'
    ],
    setup: [
      'Collect mandatory payer inputs and generate a unique clientTxnId within your Node.js app',
      'Concatenate parameters into a key=value string, encrypt with AES256 + HMAC-SHA384 to create encData',
      'POST only encData and clientCode to the staging/live sabPaisaInit URLs via application/x-www-form-urlencoded',
      'Allow SabPaisa to render the hosted payment UI so the payer can complete OTP/card/UPI authentication',
      'Receive encResponse on the callbackUrl, decrypt it server-side, and update your order status using status/statusCode and sabpaisaTxnId'
    ],
    sampleCodeLink: 'https://bitbucket.org/sabpaisa-wp-29/nodejs-2.0/src/main/',
    endpoints: {
      sandbox: 'https://stage-securepay.sabpaisa.in/SabPaisa/sabPaisaInit?v=1',
      production: 'https://securepay.sabpaisa.in/SabPaisa/sabPaisaInit?v=1'
    },
    metadataTag: 'NODE_BACKEND',
    requestFormat: nodeRequestFormat,
    requestParameters: nodeRequestParameters,
    sampleEncryptedRequestOverride: nodeSampleEncryptedRequest,
    sampleDecryptedRequestOverride: nodeSampleDecryptedRequest,
    responseFormat: nodeResponseFormat,
    responseParameters: nodeResponseParameters,
    sampleEncryptedResponseOverride: nodeSampleEncryptedResponse,
    sampleDecryptedResponseOverride: nodeSampleDecryptedResponse,
    integrationVideoLink: 'https://youtu.be/QuMeziNN0dM?si=1FtmB2w1NmbJ_1gw'
  }),
  buildKit('python', 'Python', {
    purpose:
      'Replicates the SabPaisa Python playbook: collect payer data, encrypt the request string into encData, POST it to sabPaisaInit, then decrypt encResponse to reconcile the order.',
    useCases: [],
    prerequisites: [
      'Set up the Python environment per the SabPaisa integration pack and load the documentation/plugin plus UAT credentials shared by SabPaisa.',
      'Request the Seamless flag from the SabPaisa backend team before kicking off UAT or production traffic.'
    ],
    setup: [
      'The payer enters all mandatory fields (name, email, mobile, amount) on the merchant form and a fresh clientTxnId is generated.',
      'Concatenate the parameters exactly as documented (key=value&key2=value2...) so the request string is deterministic.',
      'Encrypt the plain string using the SabPaisa AES-256-GCM + HMAC-SHA384 helper to generate HEX encData and submit {encData, clientCode} via POST to sabPaisaInit.',
      'SabPaisa hosts the payment page; the payer selects a payment mode and, after OTP/card/UPI verification, the account is debited.',
      'SabPaisa redirects/posts to callbackUrl with encResponse, decrypt it, split on & to extract key/value pairs, and update local order state using status/statusCode.'
    ],
    sampleCodeLink: 'https://bitbucket.org/sabpaisa-wp-29/python-2.0/src/main/',
    endpoints: {
      sandbox: 'https://stage-securepay.sabpaisa.in/SabPaisa/sabPaisaInit?v=1',
      production: 'https://securepay.sabpaisa.in/SabPaisa/sabPaisaInit?v=1'
    },
    metadataTag: 'PYTHON_BACKEND',
    requestFormat: pythonKitRequestFormat,
    requestParameters: pythonRequestParameters,
    sampleEncryptedRequestOverride: pythonSampleEncryptedRequest,
    sampleDecryptedRequestOverride: pythonSampleDecryptedRequest,
    responseFormat: pythonKitResponseFormat,
    responseParameters: pythonResponseParameters,
    sampleEncryptedResponseOverride: pythonSampleEncryptedResponse,
    sampleDecryptedResponseOverride: pythonSampleDecryptedResponse
  }),
  buildKit('dotnet', '.NET', {
    purpose:
      'Follows the SabPaisa ASP.NET (2.0) note: capture payer info inside .NET, encrypt the concatenated string into encData, post it to sabPaisaInit, then decrypt the callback to update the merchant ledger.',
    useCases: [],
    prerequisites: [
      'Prepare the ASP.NET environment with the SabPaisa-provided documentation or plugin plus the UAT credentials shared by the SabPaisa team.',
      'Coordinate with SabPaisa backend to enable the Seamless flag on the merchant account before performing UAT or moving to production.'
    ],
    setup: [
      'Payer fills the merchant form with all mandatory details and the app issues a unique clientTxnId for that attempt.',
      'Server composes the request string (`key=value&...`) in the documented order so the encryption input is deterministic.',
      'Encrypt the string using the SabPaisa AES-256-GCM + HMAC-SHA384 helper to obtain encData, then POST encData and clientCode to the sabPaisaInit sandbox/live URL (method = POST).',
      'SabPaisa renders the hosted checkout, validates OTP/card/UPI, and shares the SabPaisa response code when the transaction completes.',
      'SabPaisa redirects/posts to the merchant callbackUrl with encResponse, decrypt it, split the key/value pairs, and update local status based on status/statusCode plus sabpaisaTxnId.'
    ],
    sampleCodeLink: 'https://bitbucket.org/sabpaisa-wp-29/asp.net2.0/src/main/',
    endpoints: {
      sandbox: 'https://stage-securepay.sabpaisa.in/SabPaisa/sabPaisaInit?v=1',
      production: 'https://securepay.sabpaisa.in/SabPaisa/sabPaisaInit?v=1'
    },
    metadataTag: 'DOTNET_BACKEND',
    requestFormat: dotnetRequestFormat,
    requestParameters: dotnetRequestParameters,
    sampleEncryptedRequestOverride: dotnetSampleEncryptedRequest,
    sampleDecryptedRequestOverride: dotnetSampleDecryptedRequest,
    responseFormat: dotnetResponseFormat,
    responseParameters: dotnetResponseParameters,
    sampleEncryptedResponseOverride: dotnetSampleEncryptedResponse,
    sampleDecryptedResponseOverride: dotnetSampleDecryptedResponse,
    integrationVideoLink: 'https://youtu.be/HqBpn5PrnMo?si=EFwJCcfON4PAJs94'
  })
]

const webIntegrationKits: IntegrationKitDoc[] = [
  buildKit('reactjs', 'ReactJS', {
    purpose: 'Integrate SabPaisa into React single-page apps using the sabpaisa-pg-dev PaymentForm component for encrypted hand-offs and hosted checkout.',
    useCases: [
      'React landing pages selling products or collecting fees with a â€œPay with SabPaisaâ€ CTA',
      'Dashboards that trigger SabPaisa payments without leaving the React shell',
      'React microsites for donations or fines needing rapid SabPaisa integration'
    ],
    prerequisites: [
      'React 18+ app bootstrapped via CRA, Vite, or Next.js',
      'SabPaisa merchant credentials (clientCode, transUserName, transUserPassword, authKey, authIV, callbackUrl)',
      'Node.js + npm available to install sabpaisa-pg-dev'
    ],
    setup: [
      'Step 1 â€“ Install sabpaisa-pg-dev via npm install sabpaisa-pg-dev',
      'Step 2 â€“ Create SabPaisaPaymentForm.js that wraps the PaymentForm component and forwards props plus env',
      'Step 3 â€“ In App.js pass formData (client code, trans username/password, authKey, authIV, callbackUrl, clientTxnId, payer info, amount, channelId, init URL)',
      'Step 4 â€“ Start the React app with npm start and toggle env between stag/prod as needed',
      'Step 5 â€“ Inspect callbackFunction to process the SabPaisa response (status, codes, sabpaisaTxnId) and update UI/backend'
    ],
    sampleCodeLink: 'https://bitbucket.org/sabpaisa-wp-29/reactjs2.0/src/main/',
    endpoints: {
      sandbox: 'https://stage-securepay.sabpaisa.in/SabPaisa/sabPaisaInit?v=1',
      production: 'https://securepay.sabpaisa.in/SabPaisa/sabPaisaInit?v=1'
    },
    metadataTag: 'REACT_WEB',
    requestFormat: reactRequestFormat,
    requestParameters: reactRequestParameters,
    sampleEncryptedRequestOverride: reactSampleRequest,
    sampleDecryptedRequestOverride: reactSampleRequest,
    responseFormat: reactResponseFormat,
    responseParameters: reactResponseParameters,
    sampleEncryptedResponseOverride: reactSampleResponse,
    sampleDecryptedResponseOverride: reactSampleResponse,
    integrationVideoLink: 'https://youtu.be/TxMlfI8NDig?si=J3xW28MROCxfqULA'
  }),
  buildKit('angularjs', 'Angular', {
    purpose: 'Integrate SabPaisa into Angular apps via sabpaisa-pg-sdk helpers that handle encryption, redirect, and callback parsing.',
    useCases: [
      'Angular payment pages redirecting to SabPaisa while staying within the SPA experience',
      'Government/PSU Angular portals accepting fines or fees',
      'Donation or membership Angular sites needing fast payment enablement'
    ],
    prerequisites: [
      'Angular workspace running on Node.js 20.19.0 (LTS) with npm 10+',
      'SabPaisa merchant credentials stored in environment.ts (clientCode, transUserName, transUserPassword, authKey, authIV, callbackUrl)',
      'Public HTTPS callback route (e.g., /response) accessible from SabPaisa'
    ],
    setup: [
      'Step 1 â€“ Install sabpaisa-pg-sdk (npm install sabpaisa-pg-sdk)',
      'Step 2 â€“ Configure environment.ts with clientCode, transUserName, transUserPassword, authKey, authIV, callbackUrl',
      'Step 3 â€“ Define routes for PaymentFormComponent (/) and ResponsePageComponent (/response)',
      'Step 4 â€“ Build PaymentFormComponent that collects payer data and calls submitPaymentForm(formState)',
      'Step 5 â€“ Create ResponsePageComponent that runs parsePaymentResponse(authKey, authIV) and lists key/value pairs',
      'Step 6 â€“ Run npm start, use env="STAG" for staging and switch to env="PROD" for live traffic'
    ],
    sampleCodeLink: 'https://bitbucket.org/sabpaisa-wp-29/angular2.0/src/main/',
    endpoints: {
      sandbox: 'https://stage-securepay.sabpaisa.in/SabPaisa/sabPaisaInit?v=1',
      production: 'https://securepay.sabpaisa.in/SabPaisa/sabPaisaInit?v=1'
    },
    metadataTag: 'ANGULAR_WEB',
    requestFormat: angularRequestFormat,
    requestParameters: angularRequestParameters,
    sampleEncryptedRequestOverride: angularSampleRequest,
    sampleDecryptedRequestOverride: angularSampleRequest,
    responseFormat: angularResponseFormat,
    responseParameters: angularResponseParameters,
    sampleEncryptedResponseOverride: angularSampleResponse,
    sampleDecryptedResponseOverride: angularSampleResponse,
    integrationVideoLink: 'https://youtu.be/Qzy2r2aLIDk?si=D3jzgLPpA9Z5I0Ca'
  }),
  buildKit('vuejs', 'Vue.js', {
    purpose: 'Integrate SabPaisa with Vue 3 composition API for lightweight, reactive web checkout flows.',
    useCases: [
      'Vue storefronts requiring quick embed of SabPaisa payment button',
      'Nuxt server-side rendered experiences with hybrid rendering',
      'Operational dashboards enabling manual payment retriggers'
    ],
    prerequisites: [
      'Vue 3 with composition API',
      'Axios or Fetch wrapper pointing to backend proxy endpoints',
      'Pinia/Vuex store to persist payment session state'
    ],
    setup: [
      'Install @sabpaisa/vue-sdk plugin',
      'Create composables for payment intent creation and status polling',
      'Handle redirect callback inside router.afterEach to resume state',
      'Configure sandbox credentials via environment variables'
    ],
    sampleCodeLink: 'https://github.com/sabpaisa/integration-vue-starter',
    metadataTag: 'VUE_WEB',
    requestMetadata: { framework: 'Vue', mode: 'SSR' },
    responseMetadata: { framework: 'Vue', mode: 'SSR' },
    requestFormat: createFrontendRequestFormat('Vue'),
    responseFormat: createFrontendResponseFormat('Vue'),
    requestParameters: extendRequestParameters(
      {
        name: 'deviceContext.locale',
        type: 'string',
        required: false,
        description: 'Locale identifier to render localized checkout messaging.'
      }
    ),
    responseParameters: extendResponseParameters({
      name: 'uiHints',
      type: 'object',
      description: 'Helper hints to feed into Vue state (e.g., showMandateOverlay).'
    }),
    requestExtras: {
      channel: 'WEB',
      sessionId: 'SESSION-VUE-001',
      deviceContext: {
        ip: '192.0.2.19',
        userAgent: 'Mozilla/5.0 (X11; Linux x86_64)',
        locale: 'en-IN'
      }
    },
    responseExtras: {
      uiHints: {
        nextAction: 'DISPLAY_REDIRECT',
        message: 'Open SabPaisa hosted checkout in new tab'
      }
    },
    integrationVideoLink: 'https://youtu.be/6_PlHlCXUYs?si=orc1GpXC1LdvV8YL'
  })
]

const hybridIntegrationKits: IntegrationKitDoc[] = [
  buildKit('flutter', 'Flutter', {
    purpose:
      'Step-by-step SabPaisa Flutter SDK integration: install the plugin, configure Android/iOS targets, wire the Dart event callbacks, and launch the hosted checkout from sabPaisa.open().',
    useCases: [],
    prerequisites: [
      'Flutter SDK installed and project created (ensure flutter doctor passes).',
      'Android: set defaultConfig.minSdkVersion to 19 or higher and (optionally) add the provided Proguard rules.',
      'iOS: Podfile deployment target â‰¥ 10.0, ENABLE_BITCODE = YES, Swift version 5.0, CocoaPods + use_frameworks! configured.',
      'sabpaisa_flutter:^0.2.2 dependency declared in pubspec.yaml with flutter packages get executed.'
    ],
    setup: [
      'Installation â€“ open the Flutter project, add sabpaisa_flutter:^0.2.2 in pubspec.yaml, then run flutter packages get.',
      'Android configuration â€“ update android/app/build.gradle minSdkVersion 19+, add Proguard keep rules if obfuscating, run flutter clean && flutter pub get to sync Gradle.',
      'iOS configuration â€“ set platform :ios, \'10.0\' in Podfile, enable Bitcode/Swift 5 via post_install hook, ensure use_frameworks!, then run pod install (rerun if headers are missing).',
      'Usage step 1 â€“ import \'package:sabpaisa_flutter/sabpaisa_flutter.dart\' and instantiate SabPaisa sabPaisa = SabPaisa().',
      'Usage step 2 â€“ register sabPaisa.on(SabPaisa.EVENT_PAYMENT_SUCCESS/ERROR, handler) to capture TransactionResponsesModel payloads.',
      'Usage step 3 â€“ build the payment options map (first_name, last_name, currency, mobile_number, email_id, client_code, user_name, password, aes_key, aes_iv, env, txn_id, amount, callback_url, etc.).',
      'Usage step 4 â€“ invoke sabPaisa.open(getPaymentOptions()) to launch checkout; handle callbacks to update order state.',
      'Troubleshooting â€“ raise minSdkVersion if Gradle complains, bump iOS deployment target if Pods require it, ensure use_frameworks! when sabpaisa_flutter Swift headers are missing.'
    ],
    sampleCodeLink: 'https://bitbucket.org/sabpaisa-wp-29/flutter_kit_sample_2.0/src/main/',
    metadataTag: 'FLUTTER_HYBRID',
    requestFormat: flutterRequestFormat,
    responseFormat: flutterResponseFormat,
    requestParameters: nodeRequestParameters,
    responseParameters: nodeResponseParameters,
    sampleEncryptedRequestOverride: flutterSampleRequest,
    sampleDecryptedRequestOverride: flutterSampleRequest,
    sampleEncryptedResponseOverride: flutterSampleResponse,
    sampleDecryptedResponseOverride: flutterSampleResponse,
    integrationVideoLink: 'https://youtu.be/sRHGb6nd8Rg?si=-e8j8fXSbEHZfT7B'
  }),
  buildKit('react-native', 'React Native', {
    purpose:
      'This document provides a step-by-step guide for integrating the SabPaisa Payment Gateway into React Native apps using the sabpaisa-react-lib-lite library and its pre-built checkout.',
    useCases: [],
    prerequisites: [
      'React Native project running version 0.60 or higher (auto-linking ready).',
      'Node.js v14+ with npm or yarn installed on the development machine.',
      'SabPaisa merchant credentials: client code, auth key, auth IV, username, and password.'
    ],
    setup: [
      'Install sabpaisa-react-lib-lite (plus @types) via npm or yarn.',
      'Install peer dependencies react, react-native, and @react-native-community/cli.',
      'Android: rely on auto-linking for RN â‰¥ 0.60 or run react-native link sabpaisa-react-lib-lite for older versions.',
      'iOS: run pod install inside the ios directory and reopen the .xcworkspace.',
      'Import SabPaisaCheckout, build the options map with payer + merchant details, and call SabPaisaCheckout.open.',
      'Render a Pay button that triggers initiatePayment so you can handle success/failure callbacks.'
    ],
    sampleCodeLink: 'https://bitbucket.org/sabpaisa-wp-29/react-native-sabpaisa-kit-2.0/src/main/',
    metadataTag: 'RN_HYBRID',
    requestFormat: createHybridRequestFormat('React Native'),
    responseFormat: defaultResponseFormat
  }),
  buildKit('cordova', 'Cordova', {
    purpose: 'Support legacy hybrid applications built on Cordova while still meeting SabPaisa security guidelines.',
    useCases: [
      'Field collection apps maintained on Cordova',
      'Retail POS solutions running in kiosk mode',
      'Government service apps with minimal footprint'
    ],
    prerequisites: [
      'Cordova CLI 12+',
      'Whitelisted domains configuration for SabPaisa URLs',
      'Backend API exposed for secure payment creation'
    ],
    setup: [
      'Install cordova-plugin-sabpaisa',
      'Configure allow-navigation directives for sandbox and production domains',
      'Integrate plugin callbacks to trigger backend payment creation',
      'Exercise sandbox flows focusing on offline retry scenarios'
    ],
    sampleCodeLink: 'https://github.com/sabpaisa/integration-cordova-starter',
    metadataTag: 'CORDOVA_HYBRID',
    requestMetadata: { framework: 'Cordova' },
    responseMetadata: { framework: 'Cordova' },
    requestFormat: createHybridRequestFormat('Cordova'),
    responseFormat: defaultResponseFormat,
    integrationVideoLink: 'https://youtu.be/Q9Udpggc6uQ?si=gAokUOsKtsrDNhdW'
  }),
  buildKit('capacitor', 'Capacitor', {
    purpose: 'Use Capacitor runtime for modern hybrid apps that bridge web and native experiences with SabPaisa.',
    useCases: [
      'Capacitor apps needing push notifications for payment updates',
      'Embedded finance experiences inside partner apps',
      'Cross-platform internal tooling with hardware integrations'
    ],
    prerequisites: [
      'Capacitor 6+ with Android and iOS platforms added',
      'Secure storage plugin for secrets and tokens',
      'Backend integration for SabPaisa request forwarding'
    ],
    setup: [
      'npm install @sabpaisa/capacitor-plugin',
      'Register plugin with Capacitor config and sync platforms',
      'Handle deep links from SabPaisa checkout using App.addListener',
      'Validate sandbox transactions across both platforms'
    ],
    sampleCodeLink: 'https://github.com/sabpaisa/integration-capacitor-starter',
    metadataTag: 'CAPACITOR_HYBRID',
    requestMetadata: { framework: 'Capacitor' },
    responseMetadata: { framework: 'Capacitor' },
    requestFormat: createHybridRequestFormat('Capacitor'),
    responseFormat: defaultResponseFormat
  }),
  buildKit('ionic', 'Ionic', {
    purpose: 'Leverage Ionic components with SabPaisa backend integration for responsive hybrid payment flows.',
    useCases: [
      'Retail associate apps managing assisted payments',
      'Utility payment apps offering multi-channel checkout',
      'Healthcare collection solutions requiring offline-first capability'
    ],
    prerequisites: [
      'Ionic 7+ with Angular or React stack',
      'Secure token storage strategy',
      'Backend microservice for payment orchestration'
    ],
    setup: [
      'npm install @sabpaisa/ionic-sdk',
      'Integrate Ionic UI components with payment state machine',
      'Register deep link handlers for success/failure return URLs',
      'Perform sandbox smoke tests covering retries and cancellations'
    ],
    sampleCodeLink: 'https://github.com/sabpaisa/integration-ionic-starter',
    metadataTag: 'IONIC_HYBRID',
    requestMetadata: { framework: 'Ionic' },
    responseMetadata: { framework: 'Ionic' },
    requestFormat: createHybridRequestFormat('Ionic'),
    responseFormat: defaultResponseFormat
  })
]

const nativeIntegrationKits: IntegrationKitDoc[] = [
  buildKit('ios', 'iOS', {
    purpose:
      'Comprehensive SabPaisa iOS SDK integration guideâ€”prerequisites, SDK import, button wiring, required helper calls, and response customization.',
    useCases: [],
    prerequisites: [
      'Mac running macOS with Xcode 13+ installed',
      'Minimum supported deployment target of iOS 11',
      'Access to SabPaisa Swift package URL/SDK plus merchant credentials'
    ],
    setup: [
      'Add the onClick handler from ViewController.swift, import SabPaisa_IOS_Sdk, and invoke it from your payment button',
      'Install the SabPaisa SDK via Swift Package Manager (https://bitbucket.org/sabpaisa-wp-29/ios_sp_framework-v.1.0/src/main/) and add Alamofire dependency',
      'Call SabPaisaImageSync().sync() inside viewDidLoad for asset syncing',
      'Consume TransactionResponse fields to update UI/backend and optionally adjust SdkInitModel flags/callbackUrl'
    ],
    sampleCodeLink: 'https://bitbucket.org/sabpaisa-wp-29/ios_sp_kit_2/src/main/',
    metadataTag: 'IOS_NATIVE',
    requestFormat: createHybridRequestFormat('iOS native'),
    responseFormat: defaultResponseFormat,
    requestParameters: phpRequestParameters,
    responseParameters: phpResponseParameters
  }),
  buildKit('android', 'Android', {
    purpose:
      'Comprehensive SabPaisa Android SDK integration guide covering prerequisites, SDK import, UI wiring, payment initiation, and response handling.',
    useCases: [],
    prerequisites: [
      'Android Studio 4.0+ with API level 21 or higher',
      'sabaPaisapaymentgateway.aar file provided by SabPaisa',
      'UAT credentials available for sandbox testing'
    ],
    setup: [
      'Import the .aar dependency (Module Settings â†’ Add â†’ AAR) and sync Gradle',
      'Add UI trigger (Pay Now button) that calls the payment launcher',
      'Configure SabPaisaPaymentGateway with payer details and credentials (Java/Kotlin samples)',
      'Launch PaymentGatewayActivity via startActivityForResult and handle results in onActivityResult'
    ],
    sampleCodeLink: 'https://bitbucket.org/sabpaisa-wp-29/android-version-2.0/src/master/',
    metadataTag: 'ANDROID_NATIVE',
    requestFormat: createHybridRequestFormat('Android native'),
    responseFormat: defaultResponseFormat,
    requestParameters: phpRequestParameters,
    responseParameters: phpResponseParameters
  })
]

const ecommerceIntegrationKits: IntegrationKitDoc[] = [
  buildKit('woocommerce-plugin', 'WooCommerce Plugin', {
    purpose:
      'Comprehensive WooCommerce integration guide for the SabPaisa Payment Gateway plugin, covering prerequisites, installation, configuration, and testing.',
    useCases: [],
    prerequisites: [
      'WordPress 3.9.2 or higher running WooCommerce 2.4+',
      'SabPaisa merchant credentials (client code, username, password, spDomain, auth key/IV)',
      'Plugin package downloaded from the SabPaisa link'
    ],
    setup: [
      'Download the SabPaisa WooCommerce plugin via the provided link',
      'Install and activate the plugin via WordPress â†’ Plugins â†’ Add New â†’ Upload',
      'Configure WooCommerce â†’ Settings â†’ Payments â†’ SabPaisa with required credentials',
      'Enable the payment method and test via staging before going live'
    ],
    sampleCodeLink: 'https://bitbucket.org/sabpaisa-wp-29/ios_sp_kit_2/src/main/',
    metadataTag: 'WOOCOMMERCE_PLUGIN',
    requestFormat: defaultRequestFormat,
    responseFormat: defaultResponseFormat,
    endpoints: {
      sandbox: 'https://stage-securepay.sabpaisa.in/SabPaisa/sabPaisaInit?v=1',
      production: 'https://securepay.sabpaisa.in/SabPaisa/sabPaisaInit?v=1'
    }
  }),
  buildKit('odoo', 'Odoo', {
    purpose:
      'Step-by-step SabPaisa Payment Gateway integration for Odoo: download module, install, configure credentials, and move from test to live.',
    useCases: [],
    prerequisites: [
      'Running Odoo instance (version 18.0 or compatible)',
      'SabPaisa merchant account with API credentials',
      'Ability to install custom modules (developer mode/admin access)'
    ],
    setup: [
      'Download the SabPaisa Odoo module from Odoo Apps',
      'Upload the extracted module into the Odoo addons path and restart the service',
      'Update the apps list, activate the SabPaisa provider, and enter API credentials (client code, username, password, auth key/IV, PG URLs)',
      'Test in â€œTest Modeâ€ before switching to â€œLive Modeâ€ for production'
    ],
    sampleCodeLink: 'https://apps.odoo.com/apps/modules/18.0/payment_sabpaisa',
    metadataTag: 'ODOO_PLUGIN',
    requestFormat: defaultRequestFormat,
    responseFormat: defaultResponseFormat,
    endpoints: {
      sandbox: 'https://stage-securepay.sabpaisa.in/SabPaisa/sabPaisaInit?v=1',
      production: 'https://securepay.sabpaisa.in/SabPaisa/sabPaisaInit?v=1'
    }
  }),
  buildKit('wix', 'Wix', {
    purpose: 'Use the Wix custom payments integration to connect SabPaisa with Wix stores.',
    useCases: [
      'Small businesses spinning up Wix storefronts with SabPaisa support',
      'Event management sites collecting ticket payments',
      'Educational institutions hosting quick donation campaigns'
    ],
    prerequisites: [
      'Wix site with Developer Mode enabled',
      'SabPaisa credentials configured in Wix Secrets Manager',
      'Backend endpoint (Velo HTTP functions) to proxy SabPaisa requests'
    ],
    setup: [
      'Install sabpaisa-wix integration module via Velo',
      'Expose backend function to create payment intents with SabPaisa',
      'Configure Wix checkout settings to call the backend proxy',
      'Validate sandbox orders and ensure redirects return to Wix order summary'
    ],
    sampleCodeLink: 'https://github.com/sabpaisa/plugin-wix',
    metadataTag: 'WIX_PLUGIN',
    requestMetadata: { platform: 'Wix' },
    responseMetadata: { platform: 'Wix' },
    requestFormat: createPluginRequestFormat('Wix', 'https://sandbox.api.sabpaisa.in/v1/plugins/wix/orders'),
    responseFormat: {
      transport: 'Wix backend functions consume JSON responses and update order status via APIs.',
      notes: [
        'Ensure Wix backend functions validate SabPaisa signatures.',
        'Propagate redirectUrl back to Wix checkout page for automatic redirection.',
        'Log orderId and paymentId pairs in Wix Collections for traceability.'
      ]
    },
    endpoints: {
      sandbox: 'https://sandbox.api.sabpaisa.in/v1/plugins/wix/orders',
      production: 'https://api.sabpaisa.in/v1/plugins/wix/orders'
    }
  }),
  buildKit('opencart', 'OpenCart', {
    purpose: 'Add SabPaisa payment gateway to OpenCart stores via the maintained extension.',
    useCases: [
      'Merchants running OpenCart 3.x shops',
      'Channel partners operating multiple OpenCart tenants',
      'Retailers migrating from manual settlement flows'
    ],
    prerequisites: [
      'OpenCart 3.x with access to admin dashboard',
      'SabPaisa extension installed (OCMOD or VQMOD)',
      'Configured return and webhook URLs reachable from SabPaisa'
    ],
    setup: [
      'Upload sabpaisa-opencart extension and refresh modifications',
      'Enter sandbox credentials in payment extensions configuration',
      'Enable order status mappings for success, pending, and failed states',
      'Run sandbox test orders including refund scenarios'
    ],
    sampleCodeLink: 'https://github.com/sabpaisa/plugin-opencart',
    metadataTag: 'OPENCART_PLUGIN',
    requestMetadata: { platform: 'OpenCart' },
    responseMetadata: { platform: 'OpenCart' },
    requestFormat: createPluginRequestFormat('OpenCart', 'https://sandbox.api.sabpaisa.in/v1/plugins/opencart/orders'),
    responseFormat: {
      transport: 'SabPaisa sends JSON payloads which the OpenCart extension processes to update order history.',
      notes: [
        'Ensure the extension validates signatures before updating order history.',
        'Use OpenCart cron job to reconcile orders that remain pending.',
        'Store paymentId in order history comments for downstream reference.'
      ]
    },
    endpoints: {
      sandbox: 'https://sandbox.api.sabpaisa.in/v1/plugins/opencart/orders',
      production: 'https://api.sabpaisa.in/v1/plugins/opencart/orders'
    }
  })
]

const integrationDocCategories = [
  {
    id: 'server-integration',
    title: 'Server Integration',
    kits: serverIntegrationKits
  },
  {
    id: 'web-integration',
    title: 'Web Integration',
    kits: webIntegrationKits
  },
  {
    id: 'hybrid-integration',
    title: 'Hybrid Integration',
    kits: hybridIntegrationKits
  },
  {
    id: 'native-integration',
    title: 'Native Integration',
    kits: nativeIntegrationKits
  },
  {
    id: 'ecommerce-plugin',
    title: 'E-commerce Plugin',
    kits: ecommerceIntegrationKits
  },
  {
    id: 'api-reference',
    title: 'API Reference',
    kits: apiReferenceKits
  }
] as const


export default function DocsPage() {
  return (
    <div className="mx-auto max-w-6xl space-y-12 px-6 py-12">
      <IntegrationDocExplorer categories={integrationDocCategories} />

      <div className="rounded-3xl border border-border/60 bg-muted/30 p-10 shadow-inner">
        <h2 className="text-2xl font-semibold">Need help?</h2>
        <p className="mt-2 max-w-2xl text-muted-foreground">
          Can't find what you're looking for? Drop into the community forum for peer support or raise a ticket with our integration specialists.
        </p>
        <div className="mt-6 flex flex-col gap-3 sm:flex-row">
          <Button asChild className="rounded-full">
            <Link href="/community">Visit community forum</Link>
          </Button>
          <Button asChild variant="outline" className="rounded-full">
            <Link href="/contact">Contact support</Link>
          </Button>
        </div>
      </div>
    </div>
  )
}
